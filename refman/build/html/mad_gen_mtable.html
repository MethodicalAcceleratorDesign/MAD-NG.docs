<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MTables &mdash; MAD-NG Reference Manual 0.9.6 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MADX" href="mad_gen_madx.html" />
    <link rel="prev" title="Sequences" href="mad_gen_sequence.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MAD-NG Reference Manual
          </a>
              <div class="version">
                0.9.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Part I:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="mad_gen_index.html">LANGUAGE</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mad_gen_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_script.html">Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_object.html">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_beam.html">Beams</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_beta0.html">Beta0 Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_elements.html">Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_sequence.html">Sequences</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MTables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#methods">Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metamethods">Metamethods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mtables-creation">MTables creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rows-selections">Rows selections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#indexes-names-and-counts">Indexes, names and counts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterators-and-ranges">Iterators and ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-mtable">Creating a MTable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extending-a-mtable">Extending a MTable</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_madx.html">MADX</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part II:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_cmd_index.html">ELEMENTS &amp; COMMANDS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part III:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_phy_index.html">PHYSICS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part IV:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_mod_index.html">MODULES</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part V:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_prg_index.html">PROGRAMMING</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MAD-NG Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="mad_gen_index.html">LANGUAGE</a></li>
      <li class="breadcrumb-item active">MTables</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mad_gen_mtable.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="mad_gen_sequence.html" class="btn btn-neutral float-left" title="Sequences" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mad_gen_madx.html" class="btn btn-neutral float-right" title="MADX" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mtables">
<h1>MTables<a class="headerlink" href="#mtables" title="Permalink to this heading">¶</a></h1>
<p id="ch-gen-mtbl">The MAD Tables (MTables) — also named Table File System (TFS) — are objects convenient to store, read and write a large amount of heterogeneous information organized as columns and header. The MTables are also containers that provide fast access to their rows, columns, and cells by referring to their indexes, or some values of the designated reference column, or by running iterators constrained with ranges and predicates.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mtable</span></code> object is the <em>root object</em> of the TFS tables that store information relative to tables.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mtable</span></code> module extends the <a class="reference internal" href="mad_mod_types.html"><span class="doc">typeid</span></a> module with the <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_mtable</span></code> function, which returns <code class="xref mad mad-const docutils literal notranslate"><span class="pre">true</span></code> if its argument is a <code class="docutils literal notranslate"><span class="pre">mtable</span></code> object, <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">mtable</span></code> object provides the following attributes:</p>
<dl class="simple">
<dt><strong>type</strong></dt><dd><p>A <em>string</em> specifying the type of the mtable (often) set to the name of the command that created it, like <code class="docutils literal notranslate"><span class="pre">survey</span></code>, <code class="xref mad mad-var docutils literal notranslate"><span class="pre">track</span></code> or <code class="xref mad mad-var docutils literal notranslate"><span class="pre">twiss</span></code>. (default: <code class="docutils literal notranslate"><span class="pre">'user'</span></code>).</p>
</dd>
<dt><strong>title</strong></dt><dd><p>A <em>string</em> specifying the title of the mtable (often) set to the attribute <code class="docutils literal notranslate"><span class="pre">title</span></code> of the command that created it. (default: <code class="docutils literal notranslate"><span class="pre">'no-title'</span></code>).</p>
</dd>
<dt><strong>origin</strong></dt><dd><p>A <em>string</em> specifying the origin of the mtable. (default: <code class="docutils literal notranslate"><span class="pre">&quot;MAD</span> <span class="pre">version</span> <span class="pre">os</span> <span class="pre">arch&quot;</span></code>).</p>
</dd>
<dt><strong>date</strong></dt><dd><p>A <em>string</em> specifying the date of creation of the mtable. (default: <code class="docutils literal notranslate"><span class="pre">&quot;day/month/year&quot;</span></code>).</p>
</dd>
<dt><strong>time</strong></dt><dd><p>A <em>string</em> specifying the time of creation of the mtable. (default: <code class="docutils literal notranslate"><span class="pre">&quot;hour:min:sec&quot;</span></code>).</p>
</dd>
<dt><strong>refcol</strong></dt><dd><p>A <em>string</em> specifying the name of the reference column used to build the dictionary of the mtable, and to mangle values with counts. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>header</strong></dt><dd><p>A <em>list</em> specifying the augmented attributes names (and their order) used by default for the header when writing the mtable to files. Augmented meaning that the <em>list</em> is concatenated to the <em>list</em> held by the parent mtable during initialization.
(default: <code class="docutils literal notranslate"><span class="pre">{'name',</span> <span class="pre">'type',</span> <span class="pre">'title',</span> <span class="pre">'origin',</span> <span class="pre">'date',</span> <span class="pre">'time',</span> <span class="pre">'refcol'}</span></code>).</p>
</dd>
<dt><strong>column</strong></dt><dd><p>A <em>list</em> specifying the augmented columns names (and their order) used by default for the columns when writing the mtable to files. Augmented meaning that the <em>list</em> is concatenated to the <em>list</em> held by the parent mtable during initialization. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>novector</strong></dt><dd><p>A <em>logical</em> specifying to not convert (<code class="docutils literal notranslate"><span class="pre">novector</span> <span class="pre">==</span> <span class="pre">true</span></code>) columns containing only numbers to vectors during the insertion of the second row. The attribute can also be a <em>list</em> specifying the columns names to remove from the specialization. If the <em>list</em> is empty or <code class="docutils literal notranslate"><span class="pre">novector</span> <span class="pre">~=</span> <span class="pre">true</span></code>, all numeric columns will be converted to vectors, and support all methods and operations from the <a class="reference internal" href="mad_mod_linalg.html"><span class="doc">linear algebra</span></a> module. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>owner</strong></dt><dd><p>A <em>logical</em> specifying if an <em>empty</em> mtable is a view with no data (<code class="docutils literal notranslate"><span class="pre">owner</span> <span class="pre">~=</span> <span class="pre">true</span></code>), or a mtable holding data (<code class="docutils literal notranslate"><span class="pre">owner</span> <span class="pre">==</span> <span class="pre">true</span></code>). (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>reserve</strong></dt><dd><p>A <em>number</em> specifying an estimate of the maximum number of rows stored in the mtable. If the value is underestimated, the mtable will still expand on need. (default: <code class="docutils literal notranslate"><span class="pre">8</span></code>).</p>
</dd>
</dl>
<p><strong>Warning</strong>: the following private and read-only attributes are present in all mtables and should <em>never be used, set or changed</em>; breaking this rule would lead to an <em>undefined behavior</em>:</p>
<dl class="simple">
<dt><strong>__dat</strong></dt><dd><p>A <em>table</em> containing all the private data of mtables.</p>
</dd>
<dt><strong>__seq</strong></dt><dd><p>A <em>sequence</em> attached to the mtable by the <code class="docutils literal notranslate"><span class="pre">survey</span></code> and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">track</span></code> commands and used by the methods receiving a <em>reference</em> to an element as argument. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>__cycle</strong></dt><dd><p>A <em>reference</em> to the row registered with the <code class="docutils literal notranslate"><span class="pre">:cycle</span></code> method. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
</dl>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">mtable</span></code> object provides the following methods:</p>
<dl class="simple">
<dt><strong>nrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> returning the <em>number</em> of rows in the mtable.</p>
</dd>
<dt><strong>ncol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> returning the <em>number</em> of columns in the mtable.</p>
</dd>
<dt><strong>ngen</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> returning the <em>number</em> of columns generators in the mtable. The <em>number</em> of columns with data is given by <code class="docutils literal notranslate"><span class="pre">:ncol()</span> <span class="pre">-</span> <span class="pre">:ngen()</span></code>.</p>
</dd>
<dt><strong>colname</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(idx)</span></code> returning the <em>string</em> name of the <code class="docutils literal notranslate"><span class="pre">idx</span></code>-th column in the mtable or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p>
</dd>
<dt><strong>colnames</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([lst])</span></code> returning the <em>list</em> <code class="docutils literal notranslate"><span class="pre">lst</span></code> (default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>) filled with all the columns names of the mtable.</p>
</dd>
<dt><strong>index</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(idx)</span></code> returning a positive index, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>. If <code class="docutils literal notranslate"><span class="pre">idx</span></code> is negative, it is reflected versus the size of the mtable, e.g. <code class="docutils literal notranslate"><span class="pre">-1</span></code> becomes <code class="docutils literal notranslate"><span class="pre">#self</span></code>, the index of the last row.</p>
</dd>
<dt><strong>name_of</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(idx,</span> <span class="pre">[ref])</span></code> returning a <em>string</em> corresponding to the (mangled) <em>value</em> from the reference column of the row at the index <code class="docutils literal notranslate"><span class="pre">idx</span></code>, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>. A row <em>value</em> appearing more than once in the reference column will be mangled with an absolute count, e.g. <code class="docutils literal notranslate"><span class="pre">mq[3]</span></code>, or a relative count versus the reference row determined by <code class="docutils literal notranslate"><span class="pre">:index_of(ref)</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">mq{-2}</span></code>.</p>
</dd>
<dt><strong>index_of</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(a,</span> <span class="pre">[ref],</span> <span class="pre">[dir])</span></code> returning a <em>number</em> corresponding to the positive index of the row determined by the first argument or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>. If <code class="docutils literal notranslate"><span class="pre">a</span></code> is a <em>number</em> (or a <em>string</em> representing a <em>number</em>), it is interpreted as the index of the row and returned as a second <em>number</em>. If <code class="docutils literal notranslate"><span class="pre">a</span></code> is a <em>string</em>, it is interpreted as the (mangled) <em>value</em> of the row in the reference column as returned by <code class="docutils literal notranslate"><span class="pre">:name_of</span></code>. Finally, <code class="docutils literal notranslate"><span class="pre">a</span></code> can be a <em>reference</em> to an element to search for <strong>if</strong> the mtable has both, an attached sequence, and a column named <code class="docutils literal notranslate"><span class="pre">'eidx'</span></code> mapping the indexes of the elements to the attached sequence. <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> The argument <code class="docutils literal notranslate"><span class="pre">ref</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>) specifies the reference row determined by <code class="docutils literal notranslate"><span class="pre">:index_of(ref)</span></code> to use for relative indexes, for decoding mangled values with relative counts, or as the reference row to start searching from. The argument <code class="docutils literal notranslate"><span class="pre">dir</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>) specifies the direction of the search with values <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code> (forward), <code class="docutils literal notranslate"><span class="pre">-1</span></code> (backward), or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code> (no direction), which correspond respectively to the rounding methods <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, <code class="docutils literal notranslate"><span class="pre">floor</span></code> and <code class="docutils literal notranslate"><span class="pre">round</span></code> from the lua math module.</p>
</dd>
<dt><strong>range_of</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[ref],</span> <span class="pre">[dir])</span></code> returning three <em>number</em>s corresponding to the positive indexes <em>start</em> and <em>end</em> of the range and its direction <em>dir</em> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>), or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code> for an empty range. If <code class="docutils literal notranslate"><span class="pre">rng</span></code> is omitted, it returns <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">#self</span></code>, <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>, or <code class="docutils literal notranslate"><span class="pre">#self</span></code>, <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">-1</span></code> if <code class="docutils literal notranslate"><span class="pre">dir</span></code> is negative. If <code class="docutils literal notranslate"><span class="pre">rng</span></code> is a <em>number</em> or a <em>string</em> with no <code class="docutils literal notranslate"><span class="pre">'/'</span></code> separator, it is interpreted as <em>start</em> and <em>end</em>, both determined by <code class="docutils literal notranslate"><span class="pre">:index_of</span></code>. If <code class="docutils literal notranslate"><span class="pre">rng</span></code> is a <em>string</em> containing the separator <code class="docutils literal notranslate"><span class="pre">'/'</span></code>, it is split in two <em>string</em>s interpreted as <em>start</em> and <em>end</em>, both determined by <code class="docutils literal notranslate"><span class="pre">:index_of</span></code>. If <code class="docutils literal notranslate"><span class="pre">rng</span></code> is a <em>list</em>, it will be interpreted as { <em>start</em>, <em>end</em>, <code class="docutils literal notranslate"><span class="pre">[ref]</span></code>, <code class="docutils literal notranslate"><span class="pre">[dir]</span></code> }, both determined by <code class="docutils literal notranslate"><span class="pre">:index_of</span></code>. The arguments <code class="docutils literal notranslate"><span class="pre">ref</span></code> and <code class="docutils literal notranslate"><span class="pre">dir</span></code> are forwarded to all invocations of <code class="docutils literal notranslate"><span class="pre">:index_of</span></code> with a higher precedence than ones in the <em>list</em> <code class="docutils literal notranslate"><span class="pre">rng</span></code>, and a runtime error is raised if the method returns <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>, i.e. to disambiguate between a valid empty range and an invalid range.</p>
</dd>
<dt><strong>length_of</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[ntrn],</span> <span class="pre">[dir])</span></code> returning a <em>number</em> specifying the length of the range optionally including <code class="docutils literal notranslate"><span class="pre">ntrn</span></code> extra turns (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>), and calculated from the indexes returned by <code class="docutils literal notranslate"><span class="pre">:range_of([rng],</span> <span class="pre">nil,</span> <span class="pre">[dir])</span></code>.</p>
</dd>
<dt><strong>get</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">col,</span> <span class="pre">[cnt])</span></code> returning the <em>value</em> stored in the mtable at the cell <code class="docutils literal notranslate"><span class="pre">(row,col)</span></code>, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>. If <code class="docutils literal notranslate"><span class="pre">row</span></code> is a not a row index determined by <code class="docutils literal notranslate"><span class="pre">:index(row)</span></code>, it is interpreted as a (mangled) <em>value</em> to search in the reference column, taking into account the count <code class="docutils literal notranslate"><span class="pre">cnt</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>). If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name.</p>
</dd>
<dt><strong>set</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">col,</span> <span class="pre">val,</span> <span class="pre">[cnt])</span></code> returning the mtable itself after updating the cell <code class="docutils literal notranslate"><span class="pre">(row,col)</span></code> to the value <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code>, or raising an error if the cell does not exist. If <code class="docutils literal notranslate"><span class="pre">row</span></code> is a not a row index determined by <code class="docutils literal notranslate"><span class="pre">:index(row)</span></code>, it is interpreted as a (mangled) <em>value</em> to search in the reference column, taking into account the count <code class="docutils literal notranslate"><span class="pre">cnt</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>). If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name.</p>
</dd>
<dt><strong>getcol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(col)</span></code> returning the column <code class="docutils literal notranslate"><span class="pre">col</span></code>, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>. If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name.</p>
</dd>
<dt><strong>setcol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(col,</span> <span class="pre">val)</span></code> returning the mtable itself after updating the column <code class="docutils literal notranslate"><span class="pre">col</span></code> with the values of <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code>, or raising an error if the column does not exist. If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name. If the column is a generator, so must be <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> or an error will be raised. If the column is not a generator and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> is a <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(ri)</span></code>, it will be invoked with the row index <code class="docutils literal notranslate"><span class="pre">ri</span></code> as its sole argument, using its returned value to update the column cell. Otherwise <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> must be an <em>iterable</em> or an error will be raised. If the column is already a specialized <em>vector</em>, the <em>iterable</em> must provide enough numbers to fill it entirely as <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code> is not a valid value.</p>
</dd>
<dt><strong>inscol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([ref],</span> <span class="pre">col,</span> <span class="pre">val,</span> <span class="pre">[nvec])</span></code> returning the mtable itself after inserting the column data <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> with the <em>string</em> name <code class="docutils literal notranslate"><span class="pre">col</span></code> at index <code class="docutils literal notranslate"><span class="pre">ref</span></code> (default: <code class="docutils literal notranslate"><span class="pre">:ncol()+1</span></code>). If <code class="docutils literal notranslate"><span class="pre">ref</span></code> is not a column index, it is interpreted as a column name. If <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> is a <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(ri)</span></code>, it will be added as a column generator. Otherwise <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> must be an <em>iterable</em> or an error will be raised. The <em>iterable</em> will used to fill the new column that will be specialized to a <em>vector</em> if its first value is a <em>number</em> and <code class="docutils literal notranslate"><span class="pre">nvec</span> <span class="pre">~=</span> <span class="pre">true</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>addcol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(col,</span> <span class="pre">val,</span> <span class="pre">[nvec])</span></code> equivalent to <code class="docutils literal notranslate"><span class="pre">:inscol(nil,</span> <span class="pre">col,</span> <span class="pre">val,</span> <span class="pre">[nvec])</span></code>.</p>
</dd>
<dt><strong>remcol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(col)</span></code> returning the mtable itself after removing the column <code class="docutils literal notranslate"><span class="pre">col</span></code>, or raising an error if the column does not exist. If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name.</p>
</dd>
<dt><strong>rencol</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(col,</span> <span class="pre">new)</span></code> returning the mtable itself after renaming the column <code class="docutils literal notranslate"><span class="pre">col</span></code> to the <em>string</em> <code class="docutils literal notranslate"><span class="pre">new</span></code>, or raising an error if the column does not exist. If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name.</p>
</dd>
<dt><strong>getrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">[ref])</span></code> returning the <em>mappable</em> (proxy) of the row determined by the method <code class="docutils literal notranslate"><span class="pre">:index_of(row,</span> <span class="pre">[ref])</span></code>, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p>
</dd>
<dt><strong>setrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">val,</span> <span class="pre">[ref])</span></code> returning the mtable itself after updating the row at index determined by <code class="docutils literal notranslate"><span class="pre">:index_of(row,</span> <span class="pre">[ref])</span></code> using the values provided by the <em>mappable</em> <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code>, which can be a <em>list</em> iterated as pairs of (<em>index</em>, <em>value</em>) or a <em>set</em> iterated as pairs of (<em>key</em>, <em>value</em>) with <em>key</em> being the column names, or a combination of the two. An error is raised if the column does not exist.</p>
</dd>
<dt><strong>insrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">val,</span> <span class="pre">[ref])</span></code> returning the mtable itself after inserting a new row at index determined by <code class="docutils literal notranslate"><span class="pre">:index_of(row,</span> <span class="pre">[ref])</span></code> and filled with the values provided by the <em>mappable</em> <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code>, which can be a <em>list</em> iterated as pairs of (<em>index</em>, <em>value</em>) or a <em>set</em> iterated as pairs of (<em>key</em>, <em>value</em>) with <em>key</em> being the column names or a combination of the two.</p>
</dd>
<dt><strong>addrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(val)</span></code> equivalent to <code class="docutils literal notranslate"><span class="pre">:insrow(#self+1,</span> <span class="pre">val)</span></code>.</p>
</dd>
<dt><strong>remrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">[ref])</span></code> returning the mtable itself after removing the row determined by the method <code class="docutils literal notranslate"><span class="pre">:index_of(row,</span> <span class="pre">[ref])</span></code>, or raising an error if the row does not exist.</p>
</dd>
<dt><strong>swprow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row1,</span> <span class="pre">row2,</span> <span class="pre">[ref1],</span> <span class="pre">[ref2])</span></code> returning the mtable itself after swapping the content of the rows, both determined by the method <code class="docutils literal notranslate"><span class="pre">:index_of(row,</span> <span class="pre">[ref])</span></code>, or raising an error if one of the row does not exist.</p>
</dd>
<dt><strong>clrrow</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">[ref])</span></code> returning the mtable itself after clearing the row determined by the method <code class="docutils literal notranslate"><span class="pre">:index_of(row,</span> <span class="pre">[ref])</span></code>, or raising an error if the row does not exist; where clearing the row means to set <em>vector</em> value to <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code> and <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code> otherwise.</p>
</dd>
<dt><strong>clear</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> returning the mtable itself after clearing all the rows, i.e. <code class="docutils literal notranslate"><span class="pre">#self</span> <span class="pre">==</span> <span class="pre">0</span></code>, with an opportunity for new columns specialization.</p>
</dd>
<dt><strong>iter</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[ntrn],</span> <span class="pre">[dir])</span></code> returning an iterator over the mtable rows. The optional range is determined by <code class="docutils literal notranslate"><span class="pre">:range_of([rng],</span> <span class="pre">[dir])</span></code>, optionally including <code class="docutils literal notranslate"><span class="pre">ntrn</span></code> turns (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>). The optional direction <code class="docutils literal notranslate"><span class="pre">dir</span></code> specifies the forward <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code> or the backward <code class="docutils literal notranslate"><span class="pre">-1</span></code> direction of the iterator. If <code class="docutils literal notranslate"><span class="pre">rng</span></code> is not provided and the mtable is cycled, the <em>start</em> and <em>end</em> indexes are determined by <code class="docutils literal notranslate"><span class="pre">:index_of(self.__cycle)</span></code>. When used with a generic <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, the iterator returns at each rows the index and the row <em>mappable</em> (proxy).</p>
</dd>
<dt><strong>foreach</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(act,</span> <span class="pre">[rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code> returning the mtable itself after applying the action <code class="docutils literal notranslate"><span class="pre">act</span></code> on the selected rows. If <code class="docutils literal notranslate"><span class="pre">act</span></code> is a <em>set</em> representing the arguments in the packed form, the missing arguments will be extracted from the attributes <code class="docutils literal notranslate"><span class="pre">action</span></code>, <code class="docutils literal notranslate"><span class="pre">range</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">default</span></code>. The action <code class="docutils literal notranslate"><span class="pre">act</span></code> must be a <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">idx)</span></code> applied to a row passed as first argument and its index as second argument. The optional range is used to generate the loop iterator <code class="docutils literal notranslate"><span class="pre">:iter([rng])</span></code>. The optional selector <code class="docutils literal notranslate"><span class="pre">sel</span></code> is a <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">idx)</span></code> predicate selecting eligible rows for the action from the row itself passed as first argument and its index as second argument. The selector <code class="docutils literal notranslate"><span class="pre">sel</span></code> can be specified in other ways, see <a class="reference internal" href="mad_mod_numrange.html"><span class="doc">row selections</span></a> for details. The optional <em>logical</em> <code class="docutils literal notranslate"><span class="pre">not</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code>) indicates how to interpret default selection, as <em>all</em> or <em>none</em>, depending on the semantic of the action. <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
</dd>
<dt><strong>select</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code> returning the mtable itself after selecting the rows using <code class="docutils literal notranslate"><span class="pre">:foreach(sel_act,</span> <span class="pre">[rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code>. By default mtable have all their rows deselected, the selection being stored as <em>boolean</em> in the column at index <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code> and named <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_selected</span></code>.</p>
</dd>
<dt><strong>deselect</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code> returning the mtable itself after deselecting the rows using <code class="docutils literal notranslate"><span class="pre">:foreach(desel_act,</span> <span class="pre">[rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code>. By default mtable have all their rows deselected, the selection being stored as <em>boolean</em> in the column at index <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code> and named <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_selected</span></code>.</p>
</dd>
<dt><strong>filter</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code> returning a <em>list</em> containing the positive indexes of the rows determined by <code class="docutils literal notranslate"><span class="pre">:foreach(filt_act,</span> <span class="pre">[rng],</span> <span class="pre">[sel],</span> <span class="pre">[not])</span></code>, and its size.</p>
</dd>
<dt><strong>insert</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">[rng],</span> <span class="pre">[sel])</span></code> returning the mtable itself after inserting the rows in the <em>list</em> <code class="docutils literal notranslate"><span class="pre">row</span></code> at the indexes determined by <code class="docutils literal notranslate"><span class="pre">:filter([rng],</span> <span class="pre">[sel],</span> <span class="pre">true)</span></code>. If the arguments are passed in the packed form, the extra attribute <code class="docutils literal notranslate"><span class="pre">rows</span></code> will be used as a replacement for the argument <code class="docutils literal notranslate"><span class="pre">row</span></code>, and if the attribute <code class="docutils literal notranslate"><span class="pre">where=&quot;after&quot;</span></code> is defined then the rows will be inserted after the selected indexes. The insertion scheme depends on the number <span class="math notranslate nohighlight">\(R\)</span> of rows in the <em>list</em> <code class="docutils literal notranslate"><span class="pre">row</span></code> versus the number <span class="math notranslate nohighlight">\(S\)</span> of rows selected by <code class="docutils literal notranslate"><span class="pre">:filter</span></code>; <span class="math notranslate nohighlight">\(1\times 1\)</span> (one row inserted at one index), <span class="math notranslate nohighlight">\(R\times 1\)</span> (<span class="math notranslate nohighlight">\(R\)</span> rows inserted at one index), <span class="math notranslate nohighlight">\(1\times S\)</span> (one row inserted at <span class="math notranslate nohighlight">\(S\)</span> indexes) and <span class="math notranslate nohighlight">\(R\times S\)</span> (<span class="math notranslate nohighlight">\(R\)</span> rows inserted at <span class="math notranslate nohighlight">\(S\)</span> indexes). Hence, the insertion schemes insert respectively <span class="math notranslate nohighlight">\(1\)</span>, <span class="math notranslate nohighlight">\(R\)</span>, <span class="math notranslate nohighlight">\(S\)</span>, and <span class="math notranslate nohighlight">\(\min(R, S)\)</span> rows.</p>
</dd>
<dt><strong>remove</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([rng],</span> <span class="pre">[sel])</span></code> returning the mtable itself after removing the rows determined by <code class="docutils literal notranslate"><span class="pre">:filter([rng],</span> <span class="pre">[sel],</span> <span class="pre">true)</span></code>.</p>
</dd>
<dt><strong>sort</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(cmp,</span> <span class="pre">[rng],</span> <span class="pre">[sel])</span></code> returning the mtable itself after sorting the rows at the indexes determined by <code class="docutils literal notranslate"><span class="pre">:filter([rng],</span> <span class="pre">[sel],</span> <span class="pre">true)</span></code> using the ordering <em>callable</em> <code class="docutils literal notranslate"><span class="pre">cmp(row1,</span> <span class="pre">row2)</span></code>. The arguments <code class="docutils literal notranslate"><span class="pre">row1</span></code> and <code class="docutils literal notranslate"><span class="pre">row2</span></code> are <em>mappable</em> (proxies) referring to the current rows being compared and providing access to the columns values for the comparison. <a class="footnote-reference brackets" href="#f3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> The argument <code class="docutils literal notranslate"><span class="pre">cmp</span></code> can be specified in a compact ordering form as a <em>string</em> that will be converted to an ordering <em>callable</em> by the function <code class="docutils literal notranslate"><span class="pre">str2cmp</span></code> from the <a class="reference internal" href="mad_mod_numrange.html"><span class="doc">utility</span></a> module. For example, the <em>string</em> “-y,x” will be converted by the method to the following <em>lambda</em> <code class="docutils literal notranslate"><span class="pre">\r1,r2</span> <span class="pre">-&gt;</span> <span class="pre">r1.y</span> <span class="pre">&gt;</span> <span class="pre">r2.y</span> <span class="pre">or</span> <span class="pre">r1.y</span> <span class="pre">==</span> <span class="pre">r2.y</span> <span class="pre">and</span> <span class="pre">r1.x</span> <span class="pre">&lt;</span> <span class="pre">r2.x</span></code>, where <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> are the columns used to sort the mtable in descending (<cite>-</cite>) and ascending (<code class="docutils literal notranslate"><span class="pre">+</span></code>) order respectively. The compact ordering form is not limited in the number of columns and avoids making mistakes in the comparison logic when many columns are involved.</p>
</dd>
<dt><strong>cycle</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(a)</span></code> returning the mtable itself after checking that <code class="docutils literal notranslate"><span class="pre">a</span></code> is a valid reference using <code class="docutils literal notranslate"><span class="pre">:index_of(a)</span></code>, and storing it in the <code class="docutils literal notranslate"><span class="pre">__cycle</span></code> attribute, itself erased by the methods editing the mtable like <code class="docutils literal notranslate"><span class="pre">:insert</span></code>, <code class="docutils literal notranslate"><span class="pre">:remove</span></code> or <code class="docutils literal notranslate"><span class="pre">:sort</span></code>.</p>
</dd>
<dt><strong>copy</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([name],</span> <span class="pre">[owner])</span></code> returning a new mtable from a copy of <code class="docutils literal notranslate"><span class="pre">self</span></code>, with the optional <code class="docutils literal notranslate"><span class="pre">name</span></code> and the optional attribute <code class="docutils literal notranslate"><span class="pre">owner</span></code> set. If the mtable is a view, so will be the copy unless <code class="docutils literal notranslate"><span class="pre">owner</span> <span class="pre">==</span> <span class="pre">true</span></code>.</p>
</dd>
<dt><strong>is_view</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> returning <code class="xref mad mad-const docutils literal notranslate"><span class="pre">true</span></code> if the mtable is a view over another mtable data, <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
</dd>
<dt><strong>set_readonly</strong></dt><dd><p>Set the mtable as read-only, including the columns and the rows proxies.</p>
</dd>
<dt><strong>read</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([filname])</span></code> returning a new instance of <code class="docutils literal notranslate"><span class="pre">self</span></code> filled with the data read from the file determined by <code class="docutils literal notranslate"><span class="pre">openfile(filename,</span> <span class="pre">'r',</span> <span class="pre">{'.tfs','.txt','.dat'})</span></code> from the <a class="reference internal" href="mad_mod_miscfuns.html"><span class="doc">utility</span></a> module. This method can read columns containing the data types <em>nil</em>, <em>boolean</em>, <em>number</em>, <em>complex number</em>, (numerical) <em>range</em>, and (quoted) <em>string</em>. The header can also contain tables saved as <em>string</em> and decoded with <em>function</em> <code class="docutils literal notranslate"><span class="pre">str2tbl</span></code> from the <a class="reference internal" href="mad_mod_miscfuns.html"><span class="doc">utility</span></a> module.</p>
</dd>
<dt><strong>write</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([filname],</span> <span class="pre">[clst],</span> <span class="pre">[hlst],</span> <span class="pre">[rsel])</span></code> returning the mtable itself after writing its content to the file determined by <code class="docutils literal notranslate"><span class="pre">openfile(filename,</span> <span class="pre">'w',</span> <span class="pre">{'.tfs',</span> <span class="pre">'.txt',</span> <span class="pre">'.dat'})</span></code> from the <a class="reference internal" href="mad_mod_miscfuns.html"><span class="doc">utility</span></a> module. The columns to write and their order is determined by <code class="docutils literal notranslate"><span class="pre">clst</span></code> or <code class="docutils literal notranslate"><span class="pre">self.column</span></code> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code> <span class="math notranslate nohighlight">\(\equiv\)</span> all columns). The attributes to write in the header and their order is determined by <code class="docutils literal notranslate"><span class="pre">hlst</span></code> or <code class="docutils literal notranslate"><span class="pre">self.header</span></code>. The <em>logical</em> <code class="docutils literal notranslate"><span class="pre">rsel</span></code> indicates to save all rows or only rows selected by the <code class="docutils literal notranslate"><span class="pre">:select</span></code> method (<code class="docutils literal notranslate"><span class="pre">rsel</span> <span class="pre">==</span> <span class="pre">true</span></code>). This method can write columns containing the data types <em>nil</em>, <em>boolean</em>, <em>number</em>, <em>complex number</em>, (numerical) <em>range</em>, and (quoted) <em>string</em>. The header can also contain tables saved as <em>string</em> and encoded with <em>function</em> <code class="docutils literal notranslate"><span class="pre">tbl2str</span></code> from the <a class="reference internal" href="mad_mod_miscfuns.html"><span class="doc">utility</span></a> module.</p>
</dd>
<dt><strong>print</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([clst],</span> <span class="pre">[hlst],</span> <span class="pre">[rsel])</span></code> equivalent to <code class="docutils literal notranslate"><span class="pre">:write(nil,</span> <span class="pre">[clst],</span> <span class="pre">[hlst],</span> <span class="pre">[rsel])</span></code>.</p>
</dd>
<dt><strong>save_sel</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([sel])</span></code> saving the rows selection to the optional <em>iterable</em> <code class="docutils literal notranslate"><span class="pre">sel</span></code> (default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>) and return it.</p>
</dd>
<dt><strong>restore_sel</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(sel)</span></code> restoring the rows selection from the <em>iterable</em> <code class="docutils literal notranslate"><span class="pre">sel</span></code>. The indexes of <code class="docutils literal notranslate"><span class="pre">sel</span></code> must match the indexes of the rows in the mtable.</p>
</dd>
<dt><strong>make_dict</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([col])</span></code> returning the mtable itself after building the rows dictionnary from the values of the reference column determined by <code class="docutils literal notranslate"><span class="pre">col</span></code> (default: <code class="docutils literal notranslate"><span class="pre">refcol</span></code>) for fast row access. If <code class="docutils literal notranslate"><span class="pre">col</span></code> is not a column index, it is interpreted as a column name except for the special name <code class="docutils literal notranslate"><span class="pre">'none'</span></code> that disables the rows dictionnary and reset <code class="docutils literal notranslate"><span class="pre">refcol</span></code> to <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p>
</dd>
<dt><strong>check_mtbl</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> checking the integrity of the mtable and its dictionary (if any), for debugging purpose only.</p>
</dd>
</dl>
</section>
<section id="metamethods">
<h2>Metamethods<a class="headerlink" href="#metamethods" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">mtable</span></code> object provides the following metamethods:</p>
<dl>
<dt><strong>__len</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">()</span></code> called by the length operator <code class="docutils literal notranslate"><span class="pre">#</span></code> to return the number of rows in the mtable.</p>
</dd>
<dt><strong>__add</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">(val)</span></code> called by the plus operator <code class="docutils literal notranslate"><span class="pre">+</span></code> returning the mtable itself after appending the row <code class="xref mad mad-var docutils literal notranslate"><span class="pre">val</span></code> at its end, similiar to the <code class="docutils literal notranslate"><span class="pre">:addrow</span></code> method.</p>
</dd>
<dt><strong>__index</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">(key)</span></code> called by the indexing operator <code class="docutils literal notranslate"><span class="pre">[key]</span></code> to return the <em>value</em> of an attribute determined by <em>key</em>. The <em>key</em> is interpreted differently depending on its type with the following precedence:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A <em>number</em> is interpreted as a row index and returns an <em>iterable</em> on the row (proxy) or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p></li>
<li><p>Other <em>key</em> types are interpreted as <em>object</em> attributes subject to object model lookup.</p></li>
<li><p>If the <em>value</em> associated with <em>key</em> is <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>, then <em>key</em> is interpreted as a column name and returns the column if it exists, otherwise…</p></li>
<li><p>If <em>key</em> is not a column name, then <em>key</em> is interpreted as a value in the reference column and returns either an <em>iterable</em> on the row (proxy) determined by this value or an <em>iterable</em> on the rows (proxies) holding this non-unique value. <a class="footnote-reference brackets" href="#f4" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></li>
<li><p>Otherwise returns <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p></li>
</ol>
</div></blockquote>
</dd>
<dt><strong>__newindex</strong></dt><dd><p>A <em>metamethod</em>  <code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">val)</span></code> called by the assignment operator <code class="docutils literal notranslate"><span class="pre">[key]=val</span></code> to create new attributes for the pairs (<em>key</em>, <em>value</em>). If <em>key</em> is a <em>number</em> or a value specifying a row in the reference column or a <em>string</em> specifying a column name, the following error is raised:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;invalid mtable write access (use &#39;set&#39; methods)&quot;</span>
</pre></div>
</div>
</dd>
<dt><strong>__init</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">()</span></code> called by the constructor to build the mtable from the column names stored in its <em>list</em> part and some attributes, like <code class="docutils literal notranslate"><span class="pre">owner</span></code>, <code class="docutils literal notranslate"><span class="pre">reserve</span></code> and <code class="docutils literal notranslate"><span class="pre">novector</span></code>.</p>
</dd>
<dt><strong>__copy</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">()</span></code> similar to the <em>method</em> <code class="docutils literal notranslate"><span class="pre">copy</span></code>.</p>
</dd>
</dl>
<p>The following attribute is stored with metamethods in the metatable, but has different purpose:</p>
<dl class="simple">
<dt><strong>__mtbl</strong></dt><dd><p>A unique private <em>reference</em> that characterizes mtables.</p>
</dd>
</dl>
</section>
<section id="mtables-creation">
<h2>MTables creation<a class="headerlink" href="#mtables-creation" title="Permalink to this heading">¶</a></h2>
<p id="sec-tbl-create">During its creation as an <em>object</em>, an mtable can defined its attributes as any object, and the <em>list</em> of its column names, which will be cleared after its initialization. Any column name in the <em>list</em> that is enclosed by braces is designated as the refererence column for the dictionnary that provides fast row indexing, and the attribute <code class="docutils literal notranslate"><span class="pre">refcol</span></code> is set accordingly.</p>
<p>Some attributes are considered during the creation by the <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">__init</span></code>, like <code class="docutils literal notranslate"><span class="pre">owner</span></code>, <code class="docutils literal notranslate"><span class="pre">reserve</span></code> and <code class="docutils literal notranslate"><span class="pre">novector</span></code>, and some others are initialized with defined values like <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">origin</span></code>, <code class="docutils literal notranslate"><span class="pre">date</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code>, and <code class="docutils literal notranslate"><span class="pre">refcol</span></code>. The attributes <code class="docutils literal notranslate"><span class="pre">header</span></code> and <code class="docutils literal notranslate"><span class="pre">column</span></code> are concatenated with the the parent ones to build incrementing <em>list</em> of attributes names and columns names used by default when writing the mtable to files, and these lists are not provided as arguments.</p>
<p>The following example shows how to create a mtable form a <em>list</em> of column names add rows:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">mtable</span> <span class="kr">in</span> <span class="n">MAD</span>
<span class="kd">local</span> <span class="n">tbl</span> <span class="o">=</span> <span class="n">mtable</span> <span class="s1">&#39;mytable&#39;</span> <span class="p">{</span>

   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">},</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">}</span> <span class="c1">-- column &#39;name&#39; is the refcol</span>
  <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p11&#39;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span> <span class="p">}</span>
  <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p12&#39;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">2.2</span> <span class="p">}</span>
  <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p13&#39;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">3.2</span> <span class="p">}</span>
  <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p11&#39;</span><span class="p">,</span> <span class="mf">3.1</span><span class="p">,</span> <span class="mf">4.2</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tbl</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">tbl</span><span class="p">.</span><span class="n">refcol</span><span class="p">,</span> <span class="n">tbl</span><span class="p">:</span><span class="n">getcol</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="c1">-- display: mytable  name   mtable reference column: 0x010154cd10</span>
</pre></div>
</div>
<p><strong>Pitfall:</strong> When a column is named <code class="docutils literal notranslate"><span class="pre">'name'</span></code>, it must be explicitly accessed, e.g. with the <code class="docutils literal notranslate"><span class="pre">:getcol</span></code> method, as the indexing operator <code class="docutils literal notranslate"><span class="pre">[]</span></code> gives the precedence to object’s attributes and methods. Hence, <code class="docutils literal notranslate"><span class="pre">tbl.name</span></code> returns the table name <code class="docutils literal notranslate"><span class="pre">'mytable'</span></code>, not the column <code class="docutils literal notranslate"><span class="pre">'name'</span></code>.</p>
</section>
<section id="rows-selections">
<h2>Rows selections<a class="headerlink" href="#rows-selections" title="Permalink to this heading">¶</a></h2>
<p id="sec-tbl-rowsel">The row selection in mtable use predicates in combination with iterators. The mtable iterator manages the range of rows where to apply the selection, while the predicate says if a row in this range is illegible for the selection. In order to ease the use of methods based on the <code class="docutils literal notranslate"><span class="pre">:foreach</span></code> method, the selector predicate <code class="docutils literal notranslate"><span class="pre">sel</span></code> can be built from different types of information provided in a <em>set</em> with the following attributes:</p>
<dl class="simple">
<dt><strong>selected</strong></dt><dd><p>A <em>boolean</em> compared to the rows selection stored in column <code class="docutils literal notranslate"><span class="pre">'is_selected'</span></code>.</p>
</dd>
<dt><strong>pattern</strong></dt><dd><p>A <em>string</em> interpreted as a pattern to match the <em>string</em> in the reference column, which must exist, using <code class="docutils literal notranslate"><span class="pre">string.match</span></code> from the standard library, see <a class="reference external" href="http://github.com/MethodicalAcceleratorDesign/MADdocs/blob/master/lua52-refman-madng.pdf">Lua 5.2</a> §6.4 for details. If the reference column does not exist, it can be built using the <code class="xref mad mad-meth docutils literal notranslate"><span class="pre">make_dict</span></code> method.</p>
</dd>
<dt><strong>list</strong></dt><dd><p>An <em>iterable</em> interpreted as a <em>list</em> used to build a <em>set</em> and select the rows by their name, i.e. the built predicate will use <code class="docutils literal notranslate"><span class="pre">tbl[row.name]</span></code> as a <em>logical</em>, meaning that column <code class="docutils literal notranslate"><span class="pre">name</span></code> must exists. An alternate column name can be provided through the key <code class="docutils literal notranslate"><span class="pre">colname</span></code>, i.e. used as <code class="docutils literal notranslate"><span class="pre">tbl[row[colname]]</span></code>. If the <em>iterable</em> is a single item, e.g. a <em>string</em>, it will be converted first to a <em>list</em>.</p>
</dd>
<dt><strong>table</strong></dt><dd><p>A <em>mappable</em> interpreted as a <em>set</em> used to select the rows by their name, i.e. the built predicate will use <code class="docutils literal notranslate"><span class="pre">tbl[row.name]</span></code> as a <em>logical</em>, meaning that column <code class="docutils literal notranslate"><span class="pre">name</span></code> must exists. If the <em>mappable</em> contains a <em>list</em> or is a single item, it will be converted first to a <em>list</em> and its <em>set</em> part will be discarded.</p>
</dd>
<dt><strong>kind</strong></dt><dd><p>An <em>iterable</em> interpreted as a <em>list</em> used to build a <em>set</em> and select the rows by their kind, i.e. the built predicate will use <code class="docutils literal notranslate"><span class="pre">tbl[row.kind]</span></code> as a <em>logical</em>, meaning that column <code class="docutils literal notranslate"><span class="pre">kind</span></code> must exists. If the <em>iterable</em> is a single item, e.g. a <em>string</em>, it will be converted first to a <em>list</em>. This case is equivalent to <code class="docutils literal notranslate"><span class="pre">list</span></code> with <code class="docutils literal notranslate"><span class="pre">colname='kind'</span></code>.</p>
</dd>
<dt><strong>select</strong></dt><dd><p>A <em>callable</em> interpreted as the selector itself, which allows to build any kind of predicate or to complete the restrictions already built above.</p>
</dd>
</dl>
<p>All these attributes are used in the aforementioned order to incrementally build predicates that are combined with logical conjunctions, i.e. <code class="docutils literal notranslate"><span class="pre">and</span></code>’ed, to give the final predicate used by the <code class="docutils literal notranslate"><span class="pre">:foreach</span></code> method. If only one of these attributes is needed, it is possible to pass it directly in <code class="docutils literal notranslate"><span class="pre">sel</span></code>, not as an attribute in a <em>set</em>, and its type will be used to determine the kind of predicate to build. For example, <code class="docutils literal notranslate"><span class="pre">tbl:foreach(act,</span> <span class="pre">&quot;^MB&quot;)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">tbl:foreach{action=act,</span> <span class="pre">pattern=&quot;^MB&quot;}</span></code>.</p>
</section>
<section id="indexes-names-and-counts">
<h2>Indexes, names and counts<a class="headerlink" href="#indexes-names-and-counts" title="Permalink to this heading">¶</a></h2>
<p>Indexing a mtable triggers a complex look up mechanism where the arguments will be interpreted in various ways as described in the metamethod <code class="docutils literal notranslate"><span class="pre">__index</span></code>. A <em>number</em> will be interpreted as a relative row index in the list of rows, and a negative index will be considered as relative to the end of the mtable, i.e. <code class="docutils literal notranslate"><span class="pre">-1</span></code> is the last row. Non-<em>number</em> will be interpreted first as an object key (can be anything), looking for mtable methods or attributes; then as a column name or as a row <em>value</em> in the reference column if nothing was found.</p>
<p>If a row exists but its <em>value</em> is not unique in the reference column, an <em>iterable</em> is returned. An <em>iterable</em> supports the length <code class="docutils literal notranslate"><span class="pre">#</span></code> operator to retrieve the number of rows with the same <em>value</em>, the indexing operator <code class="docutils literal notranslate"><span class="pre">[]</span></code> waiting for a count <span class="math notranslate nohighlight">\(n\)</span> to retrieve the <span class="math notranslate nohighlight">\(n\)</span>-th row from the start with that <em>value</em>, and the iterator <code class="docutils literal notranslate"><span class="pre">ipairs</span></code> to use with generic <code class="docutils literal notranslate"><span class="pre">for</span></code> loops.</p>
<p>The returned <em>iterable</em> is in practice a proxy, i.e. a fake intermediate object that emulates the expected behavior, and any attempt to access the proxy in another manner should raise a runtime error.</p>
<p><strong>Note:</strong> Compared to the sequence, the indexing operator <code class="docutils literal notranslate"><span class="pre">[]</span></code> and the method <code class="docutils literal notranslate"><span class="pre">:index_of</span></code> of the mtable always interprets a <em>number</em> as a (relative) row index. To find a row from a <span class="math notranslate nohighlight">\(s\)</span>-position [m] in the mtable if the column exists, use the functions <code class="docutils literal notranslate"><span class="pre">lsearch</span></code> or <code class="docutils literal notranslate"><span class="pre">bsearch</span></code> (if they are monotonic) from the <a class="reference internal" href="mad_mod_miscfuns.html"><span class="doc">utility</span></a> module.</p>
<p>The following example shows how to access to the rows through indexing and the <em>iterable</em>:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">mtable</span> <span class="kr">in</span> <span class="n">MAD</span>
<span class="kd">local</span> <span class="n">tbl</span> <span class="o">=</span> <span class="n">mtable</span> <span class="p">{</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">},</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">}</span> <span class="c1">-- column &#39;name&#39; is the refcol</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p11&#39;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p12&#39;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">2.2</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p13&#39;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">3.2</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p11&#39;</span><span class="p">,</span> <span class="mf">3.1</span><span class="p">,</span> <span class="mf">4.2</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tbl</span><span class="p">[</span> <span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="c1">-- display: 1.2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tbl</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="c1">-- display: 4.2</span>

<span class="nb">print</span><span class="p">(</span><span class="o">#</span><span class="n">tbl</span><span class="p">.</span><span class="n">p11</span><span class="p">,</span> <span class="n">tbl</span><span class="p">.</span><span class="n">p12</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">tbl</span><span class="p">.</span><span class="n">p11</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>            <span class="c1">-- display: 2 2.2 4.2</span>
<span class="kr">for</span> <span class="n">_</span><span class="p">,</span><span class="n">r</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">tbl</span><span class="p">.</span><span class="n">p11</span><span class="p">)</span> <span class="kr">do</span> <span class="nb">io.write</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="kr">end</span> <span class="c1">-- display: 1.1 3.1</span>
<span class="kr">for</span> <span class="n">_</span><span class="p">,</span><span class="n">v</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">tbl</span><span class="p">.</span><span class="n">p12</span><span class="p">)</span> <span class="kr">do</span> <span class="nb">io.write</span><span class="p">(</span><span class="n">v</span><span class="p">,</span>  <span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="kr">end</span> <span class="c1">-- display: &#39;p12&#39; 2.1 2.2</span>

<span class="c1">-- print name of point with name p11 in absolute and relative to p13.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tbl</span><span class="p">:</span><span class="n">name_of</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>       <span class="c1">-- display: p11[2]  (2nd p11 from start)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tbl</span><span class="p">:</span><span class="n">name_of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">))</span>   <span class="c1">-- display: p11{-1} (1st p11 before p13)</span>
</pre></div>
</div>
<p>The last two lines of code display the name of the same row but mangled with absolute and relative counts.</p>
</section>
<section id="iterators-and-ranges">
<h2>Iterators and ranges<a class="headerlink" href="#iterators-and-ranges" title="Permalink to this heading">¶</a></h2>
<p>Ranging a mtable triggers a complex look up mechanism where the arguments will be interpreted in various ways as described in the method <code class="docutils literal notranslate"><span class="pre">:range_of</span></code>, itself based on the methods <code class="docutils literal notranslate"><span class="pre">:index_of</span></code> and <code class="docutils literal notranslate"><span class="pre">:index</span></code>. The number of rows selected by a mtable range can be computed by the <code class="docutils literal notranslate"><span class="pre">:length_of</span></code> method, which accepts an extra <em>number</em> of turns to consider in the calculation.</p>
<p>The mtable iterators are created by the method <code class="docutils literal notranslate"><span class="pre">:iter</span></code>, based on the method <code class="docutils literal notranslate"><span class="pre">:range_of</span></code> as mentioned in its description and includes an extra <em>number</em> of turns as for the method <code class="docutils literal notranslate"><span class="pre">:length_of</span></code>, and a direction <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code> (forward) or <code class="docutils literal notranslate"><span class="pre">-1</span></code> (backward) for the iteration.</p>
<p>The method <code class="docutils literal notranslate"><span class="pre">:foreach</span></code> uses the iterator returned by <code class="docutils literal notranslate"><span class="pre">:iter</span></code> with a range as its sole argument to loop over the rows where to apply the predicate before executing the action. The methods <code class="docutils literal notranslate"><span class="pre">:select</span></code>, <code class="docutils literal notranslate"><span class="pre">:deselect</span></code>, <code class="docutils literal notranslate"><span class="pre">:filter</span></code>, <code class="docutils literal notranslate"><span class="pre">:insert</span></code>, and <code class="docutils literal notranslate"><span class="pre">:remove</span></code> are all based directly or indirectly on the <code class="docutils literal notranslate"><span class="pre">:foreach</span></code> method. Hence, to iterate backward over a mtable range, these methods have to use either its <em>list</em> form or a numerical range. For example the invocation <code class="docutils literal notranslate"><span class="pre">tbl:foreach(\r</span> <span class="pre">-&gt;</span> <span class="pre">print(r.name),</span> <span class="pre">{-2,</span> <span class="pre">2,</span> <span class="pre">nil,</span> <span class="pre">-1})</span></code> will iterate backward over the entire mtable excluding the first and last rows, equivalently to the invocation <code class="docutils literal notranslate"><span class="pre">tbl:foreach(\r</span> <span class="pre">-&gt;</span> <span class="pre">print(r.name),</span> <span class="pre">-2..2..-1)</span></code>.</p>
<p>The following example shows how to access to the rows with the <code class="docutils literal notranslate"><span class="pre">:foreach</span></code> method:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">mtable</span> <span class="kr">in</span> <span class="n">MAD</span>
<span class="kd">local</span> <span class="n">tbl</span> <span class="o">=</span> <span class="n">mtable</span> <span class="p">{</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">},</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p11&#39;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p12&#39;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">2.2</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p13&#39;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">3.2</span> <span class="p">}</span>
                   <span class="o">+</span> <span class="p">{</span> <span class="s1">&#39;p11&#39;</span><span class="p">,</span> <span class="mf">3.1</span><span class="p">,</span> <span class="mf">4.2</span> <span class="p">}</span>

<span class="kd">local</span> <span class="n">act</span> <span class="o">=</span> <span class="o">\</span><span class="n">r</span> <span class="o">-&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">tbl</span><span class="p">:</span><span class="n">foreach</span><span class="p">(</span><span class="n">act</span><span class="p">,</span> <span class="o">-</span><span class="mf">2..2</span><span class="o">..-</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">-- display:  p13   3.2</span>
<span class="c1">!            p12   2.2</span>
<span class="n">tbl</span><span class="p">:</span><span class="n">foreach</span><span class="p">(</span><span class="n">act</span><span class="p">,</span> <span class="s2">&quot;p11[1]/p11[2]&quot;</span><span class="p">)</span>
<span class="c1">-- display:  p11   1.2</span>
<span class="c1">!            p12   2.2</span>
<span class="c1">!            p13   3.2</span>
<span class="c1">!            p11   4.2</span>
<span class="n">tbl</span><span class="p">:</span><span class="n">foreach</span><span class="p">{</span><span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">,</span> <span class="n">range</span><span class="o">=</span><span class="s2">&quot;p11[1]/p13&quot;</span><span class="p">}</span>
<span class="c1">-- display:  p11   1.2</span>
<span class="c1">!            p12   2.2</span>
<span class="c1">!            p13   3.2</span>
<span class="n">tbl</span><span class="p">:</span><span class="n">foreach</span><span class="p">{</span><span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;[^1]$&quot;</span><span class="p">}</span>
<span class="c1">-- display:  p12   2.2</span>
<span class="c1">!            p13   3.2</span>
<span class="kd">local</span> <span class="n">act</span> <span class="o">=</span> <span class="o">\</span><span class="n">r</span> <span class="o">-&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">r</span><span class="p">.</span><span class="n">is_selected</span><span class="p">)</span>
<span class="n">tbl</span><span class="p">:</span><span class="nb">select</span><span class="p">{</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;p.1&quot;</span><span class="p">}:</span><span class="n">foreach</span><span class="p">{</span><span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">,</span> <span class="n">range</span><span class="o">=</span><span class="s2">&quot;1/-1&quot;</span><span class="p">}</span>
<span class="c1">-- display:  p11   1.2   true</span>
<span class="c1">!            p12   2.2   nil</span>
<span class="c1">!            p13   3.2   nil</span>
<span class="c1">!            p11   4.2   true</span>
</pre></div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<section id="creating-a-mtable">
<h3>Creating a MTable<a class="headerlink" href="#creating-a-mtable" title="Permalink to this heading">¶</a></h3>
<p>The following example shows how the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">track</span></code> command, i.e. <code class="docutils literal notranslate"><span class="pre">self</span></code> hereafter, creates its MTable:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">header</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">-- extra attributes to save in track headers</span>
  <span class="s1">&#39;direction&#39;</span><span class="p">,</span> <span class="s1">&#39;observe&#39;</span><span class="p">,</span> <span class="s1">&#39;implicit&#39;</span><span class="p">,</span> <span class="s1">&#39;misalign&#39;</span><span class="p">,</span> <span class="s1">&#39;deltap&#39;</span><span class="p">,</span> <span class="s1">&#39;lost&#39;</span> <span class="p">}</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">make_mtable</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">range</span><span class="p">,</span> <span class="n">nosave</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">title</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">observe</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span> <span class="n">misalign</span><span class="p">,</span> <span class="n">deltap</span><span class="p">,</span> <span class="n">savemap</span> <span class="kr">in</span> <span class="n">self</span>
  <span class="kd">local</span> <span class="n">sequ</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">sequence</span><span class="p">,</span> <span class="n">nosave</span> <span class="ow">and</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">16</span>

  <span class="kr">return</span> <span class="n">mtable</span><span class="p">(</span><span class="n">sequ</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="p">{</span> <span class="c1">-- keep column order!</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;track&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="n">dir</span><span class="p">,</span> <span class="n">observe</span><span class="o">=</span><span class="n">observe</span><span class="p">,</span> <span class="n">implicit</span><span class="o">=</span><span class="n">implicit</span><span class="p">,</span> <span class="n">misalign</span><span class="o">=</span><span class="n">misalign</span><span class="p">,</span>
    <span class="n">deltap</span><span class="o">=</span><span class="n">deltap</span><span class="p">,</span> <span class="n">lost</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">range</span><span class="o">=</span><span class="n">range</span><span class="p">,</span> <span class="n">reserve</span><span class="o">=</span><span class="n">nrow</span><span class="p">,</span> <span class="n">__seq</span><span class="o">=</span><span class="n">sequ</span><span class="p">,</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">},</span> <span class="s1">&#39;kind&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;py&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;pt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;slc&#39;</span><span class="p">,</span> <span class="s1">&#39;turn&#39;</span><span class="p">,</span> <span class="s1">&#39;tdir&#39;</span><span class="p">,</span> <span class="s1">&#39;eidx&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">savemap</span> <span class="ow">and</span> <span class="s1">&#39;__map&#39;</span> <span class="ow">or</span> <span class="kc">nil</span> <span class="p">})</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="extending-a-mtable">
<h3>Extending a MTable<a class="headerlink" href="#extending-a-mtable" title="Permalink to this heading">¶</a></h3>
<p>The following example shows how to extend the MTable created by a <code class="xref mad mad-var docutils literal notranslate"><span class="pre">twiss</span></code> command with the elements tilt, angle and integrated strengths from the attached sequence:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="c1">-- The prelude creating the sequence seq is omitted.</span>
<span class="kd">local</span> <span class="n">tws</span> <span class="o">=</span> <span class="n">twiss</span> <span class="p">{</span> <span class="n">sequence</span><span class="o">=</span><span class="n">seq</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">cofind</span><span class="o">=</span><span class="kc">true</span> <span class="p">}</span>

<span class="kd">local</span> <span class="n">is_integer</span> <span class="kr">in</span> <span class="n">MAD</span><span class="p">.</span><span class="n">typeid</span>
<span class="n">tws</span><span class="p">:</span><span class="n">addcol</span><span class="p">(</span><span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="o">\</span><span class="n">ri</span> <span class="o">=&gt;</span> <span class="c1">-- add angle column</span>
      <span class="kd">local</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">tws</span><span class="p">[</span><span class="n">ri</span><span class="p">].</span><span class="n">eidx</span>
      <span class="kr">return</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">tws</span><span class="p">.</span><span class="n">__seq</span><span class="p">[</span><span class="n">idx</span><span class="p">].</span><span class="n">angle</span> <span class="ow">or</span> <span class="mi">0</span> <span class="kr">end</span><span class="p">)</span>
   <span class="p">:</span><span class="n">addcol</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="o">\</span><span class="n">ri</span> <span class="o">=&gt;</span> <span class="c1">-- add tilt column</span>
      <span class="kd">local</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">tws</span><span class="p">[</span><span class="n">ri</span><span class="p">].</span><span class="n">eidx</span>
      <span class="kr">return</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">tws</span><span class="p">.</span><span class="n">__seq</span><span class="p">[</span><span class="n">idx</span><span class="p">].</span><span class="n">tilt</span> <span class="ow">or</span> <span class="mi">0</span> <span class="kr">end</span><span class="p">)</span>

<span class="kr">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span> <span class="kr">do</span> <span class="c1">-- add kil and kisl columns</span>
<span class="n">tws</span><span class="p">:</span><span class="n">addcol</span><span class="p">(</span><span class="s1">&#39;k&#39;</span><span class="o">..</span><span class="n">i</span><span class="o">-</span><span class="mf">1.</span><span class="p">.</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="o">\</span><span class="n">ri</span> <span class="o">=&gt;</span>
      <span class="kd">local</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">tws</span><span class="p">[</span><span class="n">ri</span><span class="p">].</span><span class="n">eidx</span>
      <span class="kr">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="kr">then</span> <span class="kr">return</span> <span class="mi">0</span> <span class="kr">end</span> <span class="c1">-- implicit drift</span>
      <span class="kd">local</span> <span class="n">elm</span> <span class="o">=</span> <span class="n">tws</span><span class="p">.</span><span class="n">__seq</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
      <span class="kr">return</span> <span class="p">(</span><span class="n">elm</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="o">..</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="n">elm</span><span class="p">.</span><span class="n">l</span> <span class="o">+</span> <span class="p">((</span><span class="n">elm</span><span class="p">.</span><span class="n">knl</span> <span class="ow">or</span> <span class="p">{})[</span><span class="n">i</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
    <span class="kr">end</span><span class="p">)</span>
   <span class="p">:</span><span class="n">addcol</span><span class="p">(</span><span class="s1">&#39;k&#39;</span><span class="o">..</span><span class="n">i</span><span class="o">-</span><span class="mf">1.</span><span class="p">.</span><span class="s1">&#39;sl&#39;</span><span class="p">,</span> <span class="o">\</span><span class="n">ri</span> <span class="o">=&gt;</span>
      <span class="kd">local</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">tws</span><span class="p">[</span><span class="n">ri</span><span class="p">].</span><span class="n">eidx</span>
      <span class="kr">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="kr">then</span> <span class="kr">return</span> <span class="mi">0</span> <span class="kr">end</span> <span class="c1">-- implicit drift</span>
      <span class="kd">local</span> <span class="n">elm</span> <span class="o">=</span> <span class="n">tws</span><span class="p">.</span><span class="n">__seq</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
      <span class="kr">return</span> <span class="p">(</span><span class="n">elm</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="o">..</span><span class="n">i</span><span class="o">-</span><span class="mf">1.</span><span class="p">.</span><span class="s1">&#39;s&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="n">elm</span><span class="p">.</span><span class="n">l</span> <span class="o">+</span> <span class="p">((</span><span class="n">elm</span><span class="p">.</span><span class="n">ksl</span> <span class="ow">or</span> <span class="p">{})[</span><span class="n">i</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
    <span class="kr">end</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="n">cols</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;kind&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="s1">&#39;tilt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;py&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;pt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;beta11&#39;</span><span class="p">,</span> <span class="s1">&#39;beta22&#39;</span><span class="p">,</span> <span class="s1">&#39;alfa11&#39;</span><span class="p">,</span> <span class="s1">&#39;alfa22&#39;</span><span class="p">,</span> <span class="s1">&#39;mu1&#39;</span><span class="p">,</span> <span class="s1">&#39;mu2&#39;</span><span class="p">,</span> <span class="s1">&#39;dx&#39;</span><span class="p">,</span> <span class="s1">&#39;ddx&#39;</span><span class="p">,</span>
    <span class="s1">&#39;k1l&#39;</span><span class="p">,</span> <span class="s1">&#39;k2l&#39;</span><span class="p">,</span> <span class="s1">&#39;k3l&#39;</span><span class="p">,</span> <span class="s1">&#39;k4l&#39;</span><span class="p">,</span> <span class="s1">&#39;k1sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k2sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k3sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k4sl&#39;</span><span class="p">}</span>

<span class="n">tws</span><span class="p">:</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;twiss&quot;</span><span class="p">,</span> <span class="n">cols</span><span class="p">)</span> <span class="c1">-- write header and columns to file twiss.tfs</span>
</pre></div>
</div>
<p>Hopefully, the <a class="reference internal" href="mad_mod_gphys.html"><span class="doc">physics</span></a> module provides the <em>function</em> <code class="docutils literal notranslate"><span class="pre">melmcol(mtbl,</span> <span class="pre">cols)</span></code> to achieve the same task easily:</p>
<div class="highlight-mad notranslate"><div class="highlight"><pre><span></span><span class="c1">-- The prelude creating the sequence seq is omitted.</span>
<span class="kd">local</span> <span class="n">tws</span> <span class="o">=</span> <span class="n">twiss</span> <span class="p">{</span> <span class="n">sequence</span><span class="o">=</span><span class="n">seq</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">cofind</span><span class="o">=</span><span class="kc">true</span> <span class="p">}</span>

<span class="c1">-- Add element properties as columns</span>
<span class="kd">local</span> <span class="n">melmcol</span> <span class="kr">in</span> <span class="n">MAD</span><span class="p">.</span><span class="n">gphys</span>
<span class="kd">local</span> <span class="n">melmcol</span><span class="p">(</span><span class="n">tws</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;k1l&#39;</span> <span class="p">,</span> <span class="s1">&#39;k2l&#39;</span> <span class="p">,</span> <span class="s1">&#39;k3l&#39;</span> <span class="p">,</span> <span class="s1">&#39;k4l&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;k1sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k2sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k3sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k4sl&#39;</span><span class="p">})</span>

<span class="c1">-- write TFS table</span>
<span class="n">tws</span><span class="p">:</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;twiss&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;kind&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="s1">&#39;tilt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;py&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;pt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;beta11&#39;</span><span class="p">,</span> <span class="s1">&#39;beta22&#39;</span><span class="p">,</span> <span class="s1">&#39;alfa11&#39;</span><span class="p">,</span> <span class="s1">&#39;alfa22&#39;</span><span class="p">,</span> <span class="s1">&#39;mu1&#39;</span><span class="p">,</span> <span class="s1">&#39;mu2&#39;</span><span class="p">,</span> <span class="s1">&#39;dx&#39;</span><span class="p">,</span> <span class="s1">&#39;ddx&#39;</span><span class="p">,</span>
    <span class="s1">&#39;k1l&#39;</span><span class="p">,</span> <span class="s1">&#39;k2l&#39;</span><span class="p">,</span> <span class="s1">&#39;k3l&#39;</span><span class="p">,</span> <span class="s1">&#39;k4l&#39;</span><span class="p">,</span> <span class="s1">&#39;k1sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k2sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k3sl&#39;</span><span class="p">,</span> <span class="s1">&#39;k4sl&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>These information are usually provided by the command creating the <code class="docutils literal notranslate"><span class="pre">mtable</span></code>, like <code class="docutils literal notranslate"><span class="pre">survey</span></code> and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">track</span></code>.</p>
</aside>
<aside class="footnote brackets" id="f2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>For example, the <code class="docutils literal notranslate"><span class="pre">:remove</span></code> method needs <code class="docutils literal notranslate"><span class="pre">not=true</span></code> to <em>not</em> remove all rows if no selector is provided.</p>
</aside>
<aside class="footnote brackets" id="f3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>A <em>mappable</em> supports the length operator <code class="docutils literal notranslate"><span class="pre">#</span></code>, the indexing operator <code class="docutils literal notranslate"><span class="pre">[]</span></code>, and generic <code class="docutils literal notranslate"><span class="pre">for</span></code> loops with <code class="docutils literal notranslate"><span class="pre">pairs</span></code>.</p>
</aside>
<aside class="footnote brackets" id="f4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>An <em>iterable</em> supports the length operator <code class="docutils literal notranslate"><span class="pre">#</span></code>, the indexing operator <code class="docutils literal notranslate"><span class="pre">[]</span></code>, and generic <code class="docutils literal notranslate"><span class="pre">for</span></code> loops with <code class="docutils literal notranslate"><span class="pre">ipairs</span></code>.</p>
</aside>
</aside>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mad_gen_sequence.html" class="btn btn-neutral float-left" title="Sequences" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mad_gen_madx.html" class="btn btn-neutral float-right" title="MADX" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Laurent Deniau.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>