<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elements &mdash; MAD-NG Reference Manual 0.9.6 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sequences" href="mad_gen_sequence.html" />
    <link rel="prev" title="Beta0 Blocks" href="mad_gen_beta0.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MAD-NG Reference Manual
          </a>
              <div class="version">
                0.9.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Part I:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="mad_gen_index.html">LANGUAGE</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mad_gen_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_script.html">Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_object.html">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_beam.html">Beams</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_beta0.html">Beta0 Blocks</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#taxonomy">Taxonomy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#methods">Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metamethods">Metamethods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sbend">SBend</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rbend">RBend</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quadrupole">Quadrupole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sextupole">Sextupole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#octupole">Octupole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decapole">Decapole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dodecapole">Dodecapole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solenoid">Solenoid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multipole">Multipole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tkicker">TKicker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kicker-hkicker-vkicker">Kicker, HKicker, VKicker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#monitor-hmonitor-vmonitor">Monitor, HMonitor, VMonitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rfcavity">RFCavity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rfmultipole">RFMultipole</a></li>
<li class="toctree-l4"><a class="reference internal" href="#elseparator">ElSeparator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wiggler">Wiggler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#beambeam">BeamBeam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#genmap">GenMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="#slink">SLink</a></li>
<li class="toctree-l4"><a class="reference internal" href="#translate">Translate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xrotation-yrotation-srotation">XRotation, YRotation, SRotation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changeref">ChangeRef</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changedir">ChangeDir</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changenrj">ChangeNrj</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#flags">Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fringe-fields">Fringe fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sub-elements">Sub-elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aperture">Aperture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#misalignment">Misalignment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_sequence.html">Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_mtable.html">MTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="mad_gen_madx.html">MADX</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part II:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_cmd_index.html">ELEMENTS &amp; COMMANDS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part III:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_phy_index.html">PHYSICS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part IV:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_mod_index.html">MODULES</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Part V:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mad_prg_index.html">PROGRAMMING</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MAD-NG Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="mad_gen_index.html">LANGUAGE</a></li>
      <li class="breadcrumb-item active">Elements</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mad_gen_elements.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="mad_gen_beta0.html" class="btn btn-neutral float-left" title="Beta0 Blocks" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mad_gen_sequence.html" class="btn btn-neutral float-right" title="Sequences" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="elements">
<h1>Elements<a class="headerlink" href="#elements" title="Permalink to this heading">¶</a></h1>
<p id="ch-gen-elems">The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> object is the <em>root object</em> of all elements used to model particle accelerators, including sequences and drifts. It provides most default values inherited by all elements.</p>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> module extends the <a class="reference internal" href="mad_mod_types.html"><span class="doc">typeid</span></a> module with the <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_element</span></code> <em>function</em>, which returns <code class="xref mad mad-const docutils literal notranslate"><span class="pre">true</span></code> if its argument is an <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> object, <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
<section id="taxonomy">
<h2>Taxonomy<a class="headerlink" href="#taxonomy" title="Permalink to this heading">¶</a></h2>
<p>The classes defined by the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> module are organized according to the kinds and the roles of their instances. The classes defining the kinds are:</p>
<dl class="simple">
<dt><strong>thin</strong></dt><dd><p>The <em>thin</em> elements have zero-length and their physics does not depend on it, i.e. the attribute <code class="xref mad mad-var docutils literal notranslate"><span class="pre">l</span></code> is discarded or forced to zero in the physics.</p>
</dd>
<dt><strong>thick</strong></dt><dd><p>The <em>thick</em> elements have a length and their physics depends on it. Elements like <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sbend</span></code>, <code class="xref mad mad-var docutils literal notranslate"><span class="pre">rbend</span></code>, <code class="xref mad mad-var docutils literal notranslate"><span class="pre">quadrupole</span></code>, <code class="xref mad mad-var docutils literal notranslate"><span class="pre">solenoid</span></code>, and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">elseparator</span></code> trigger a runtime error if they have zero-length. Other thick elements will accept to have zero-length for compatibility with MAD-X <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> , but their physics will have to be adjusted. <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
</dd>
<dt><strong>drift</strong></dt><dd><p>The <em>drift</em> elements have a length with a <code class="docutils literal notranslate"><span class="pre">drift</span></code>-like physics if <span class="math notranslate nohighlight">\(l\geq\)</span> <code class="xref mad mad-var docutils literal notranslate"><span class="pre">minlen</span></code> <a class="footnote-reference brackets" href="#f3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> otherwise they are discarded or ignored. Any space between elements with a length <span class="math notranslate nohighlight">\(l\geq\)</span> <code class="xref mad mad-var docutils literal notranslate"><span class="pre">minlen</span></code> are represented by an <code class="xref mad mad-var docutils literal notranslate"><span class="pre">implicit</span></code> drift created on need by the <span class="math notranslate nohighlight">\(s\)</span>-iterator of sequences and discarded afterward.</p>
</dd>
<dt><strong>patch</strong></dt><dd><p>The <em>patch</em> elements have zero-length and the purpose of their physics is to change the reference frame.</p>
</dd>
<dt><strong>extrn</strong></dt><dd><p>The <em>extern</em> elements are never part of sequences. If they are present in a sequence definition, they are expanded and replaced by their content, i.e. stay external to the lattice.</p>
</dd>
<dt><strong>specl</strong></dt><dd><p>The <em>special</em> elements have special roles like <em>marking</em> places (i.e. <code class="xref mad mad-var docutils literal notranslate"><span class="pre">maker</span></code>) or <em>branching</em> sequences (i.e. <code class="xref mad mad-var docutils literal notranslate"><span class="pre">slink</span></code>).</p>
</dd>
</dl>
<p>These classes are not supposed to be used directly, except for extending the hierarchy defined by the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> module and schematically reproduced hereafter to help users understanding:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="n">thin_element</span> <span class="o">=</span> <span class="n">element</span>  <span class="s1">&#39;thin_element&#39;</span> <span class="p">{</span> <span class="n">is_thin</span>    <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
<span class="n">thick_element</span> <span class="o">=</span> <span class="n">element</span> <span class="s1">&#39;thick_element&#39;</span> <span class="p">{</span> <span class="n">is_thick</span>   <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
<span class="n">drift_element</span> <span class="o">=</span> <span class="n">element</span> <span class="s1">&#39;drift_element&#39;</span> <span class="p">{</span> <span class="n">is_drift</span>   <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
<span class="n">patch_element</span> <span class="o">=</span> <span class="n">element</span> <span class="s1">&#39;patch_element&#39;</span> <span class="p">{</span> <span class="n">is_patch</span>   <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
<span class="n">extrn_element</span> <span class="o">=</span> <span class="n">element</span> <span class="s1">&#39;extrn_element&#39;</span> <span class="p">{</span> <span class="n">is_extern</span>  <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
<span class="n">specl_element</span> <span class="o">=</span> <span class="n">element</span> <span class="s1">&#39;specl_element&#39;</span> <span class="p">{</span> <span class="n">is_special</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>

<span class="n">sequence</span>    <span class="o">=</span> <span class="n">extrn_element</span> <span class="s1">&#39;sequence&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">assembly</span>    <span class="o">=</span> <span class="n">extrn_element</span> <span class="s1">&#39;assembly&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">bline</span>       <span class="o">=</span> <span class="n">extrn_element</span> <span class="s1">&#39;bline&#39;</span>       <span class="p">{</span> <span class="p">}</span>

<span class="n">marker</span>      <span class="o">=</span> <span class="n">specl_element</span> <span class="s1">&#39;marker&#39;</span>      <span class="p">{</span> <span class="p">}</span>
<span class="n">slink</span>       <span class="o">=</span> <span class="n">specl_element</span> <span class="s1">&#39;slink&#39;</span>       <span class="p">{</span> <span class="p">}</span>

<span class="n">drift</span>       <span class="o">=</span> <span class="n">drift_element</span> <span class="s1">&#39;drift&#39;</span>       <span class="p">{</span> <span class="p">}</span>
<span class="n">collimator</span>  <span class="o">=</span> <span class="n">drift_element</span> <span class="s1">&#39;collimator&#39;</span>  <span class="p">{</span> <span class="p">}</span>
<span class="n">instrument</span>  <span class="o">=</span> <span class="n">drift_element</span> <span class="s1">&#39;instrument&#39;</span>  <span class="p">{</span> <span class="p">}</span>
<span class="n">placeholder</span> <span class="o">=</span> <span class="n">drift_element</span> <span class="s1">&#39;placeholder&#39;</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">sbend</span>       <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;sbend&#39;</span>       <span class="p">{</span> <span class="p">}</span>
<span class="n">rbend</span>       <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;rbend&#39;</span>       <span class="p">{</span> <span class="p">}</span>
<span class="n">quadrupole</span>  <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;quadrupole&#39;</span>  <span class="p">{</span> <span class="p">}</span>
<span class="n">sextupole</span>   <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;sextupole&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">octupole</span>    <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;octupole&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">decapole</span>    <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;decapole&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">dodecapole</span>  <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;dodecapole&#39;</span>  <span class="p">{</span> <span class="p">}</span>
<span class="n">solenoid</span>    <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;solenoid&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">tkicker</span>     <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;tkicker&#39;</span>     <span class="p">{</span> <span class="p">}</span>
<span class="n">wiggler</span>     <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;wiggler&#39;</span>     <span class="p">{</span> <span class="p">}</span>
<span class="n">elseparator</span> <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;elseparator&#39;</span> <span class="p">{</span> <span class="p">}</span>
<span class="n">rfcavity</span>    <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;rfcavity&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">genmap</span>      <span class="o">=</span> <span class="n">thick_element</span> <span class="s1">&#39;genmap&#39;</span>      <span class="p">{</span> <span class="p">}</span>

<span class="n">beambeam</span>    <span class="o">=</span> <span class="n">thin_element</span>  <span class="s1">&#39;beambeam&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">multipole</span>   <span class="o">=</span> <span class="n">thin_element</span>  <span class="s1">&#39;multipole&#39;</span>   <span class="p">{</span> <span class="p">}</span>

<span class="n">xrotation</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;xrotation&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">yrotation</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;yrotation&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">srotation</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;srotation&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">translate</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;translate&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">changeref</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;changeref&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">changedir</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;changedir&#39;</span>   <span class="p">{</span> <span class="p">}</span>
<span class="n">changenrj</span>   <span class="o">=</span> <span class="n">patch_element</span> <span class="s1">&#39;changenrj&#39;</span>   <span class="p">{</span> <span class="p">}</span>

<span class="c1">-- specializations</span>
<span class="n">rfmultipole</span> <span class="o">=</span> <span class="n">rfcavity</span>      <span class="s1">&#39;rfmultipole&#39;</span> <span class="p">{</span> <span class="p">}</span>
<span class="n">crabcavity</span>  <span class="o">=</span> <span class="n">rfmultipole</span>   <span class="s1">&#39;crabcavity&#39;</span>  <span class="p">{</span> <span class="p">}</span>

<span class="n">monitor</span>     <span class="o">=</span> <span class="n">instrument</span>     <span class="s1">&#39;monitor&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">hmonitor</span>    <span class="o">=</span> <span class="n">monitor</span>       <span class="s1">&#39;hmonitor&#39;</span>    <span class="p">{</span> <span class="p">}</span>
<span class="n">vmonitor</span>    <span class="o">=</span> <span class="n">monitor</span>       <span class="s1">&#39;vmonitor&#39;</span>    <span class="p">{</span> <span class="p">}</span>

<span class="n">kicker</span>      <span class="o">=</span> <span class="n">tkicker</span>        <span class="s1">&#39;kicker&#39;</span>     <span class="p">{</span> <span class="p">}</span>
<span class="n">hkicker</span>     <span class="o">=</span>  <span class="n">kicker</span>       <span class="s1">&#39;hkicker&#39;</span>     <span class="p">{</span> <span class="p">}</span>
<span class="n">vkicker</span>     <span class="o">=</span>  <span class="n">kicker</span>       <span class="s1">&#39;vkicker&#39;</span>     <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<p>All the classes above, including <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code>, define the attributes <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">kind</span> <span class="pre">=</span> <span class="pre">name</span></code> and <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_name</span> <span class="pre">=</span> <span class="pre">true</span></code> where <code class="xref mad mad-var docutils literal notranslate"><span class="pre">name</span></code> correspond to the class name. These attributes help to identify the kind and the role of an element as shown in the following code excerpt:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">drift</span><span class="p">,</span> <span class="n">hmonitor</span><span class="p">,</span> <span class="n">sequence</span> <span class="kr">in</span> <span class="n">MAD</span><span class="p">.</span><span class="n">element</span>
<span class="kd">local</span> <span class="n">dft</span> <span class="o">=</span> <span class="n">drift</span>    <span class="p">{}</span>
<span class="kd">local</span> <span class="n">bpm</span> <span class="o">=</span> <span class="n">hmonitor</span> <span class="p">{}</span>
<span class="kd">local</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">sequence</span> <span class="p">{}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dft</span><span class="p">.</span><span class="n">kind</span><span class="p">)</span>              <span class="c1">-- display: drift</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dft</span><span class="p">.</span><span class="n">is_drift</span><span class="p">)</span>          <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dft</span><span class="p">.</span><span class="n">is_drift_element</span><span class="p">)</span>  <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">kind</span><span class="p">)</span>              <span class="c1">-- display: hmonitor</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_hmonitor</span><span class="p">)</span>       <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_monitor</span><span class="p">)</span>        <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_instrument</span><span class="p">)</span>     <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_drift_element</span><span class="p">)</span>  <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_element</span><span class="p">)</span>        <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_drift</span><span class="p">)</span>          <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bpm</span><span class="p">.</span><span class="n">is_thick_element</span><span class="p">)</span>  <span class="c1">-- display: nil (not defined = false)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seq</span><span class="p">.</span><span class="n">kind</span><span class="p">)</span>              <span class="c1">-- display: sequence</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seq</span><span class="p">.</span><span class="n">is_element</span><span class="p">)</span>        <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seq</span><span class="p">.</span><span class="n">is_extrn_element</span><span class="p">)</span>  <span class="c1">-- display: true</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seq</span><span class="p">.</span><span class="n">is_thick_element</span><span class="p">)</span>  <span class="c1">-- display: nil (not defined = false)</span>
</pre></div>
</div>
</section>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading">¶</a></h2>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> <em>object</em> provides the following attributes:</p>
<dl class="simple">
<dt><strong>l</strong></dt><dd><p>A <em>number</em> specifying the physical length of the element on the design orbit [m]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>lrad</strong></dt><dd><p>A <em>number</em> specifying the field length of the element on the design orbit considered by the radiation [m]. (default: <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">lrad</span> <span class="pre">=</span> <span class="pre">\s</span> <span class="pre">-&gt;</span> <span class="pre">s.l</span></code>).</p>
</dd>
<dt><strong>angle</strong></dt><dd><p>A <em>number</em> specifying the bending angle <span class="math notranslate nohighlight">\(\alpha\)</span> of the element [rad]. A positive angle represents a bend to the right, i.e. a <span class="math notranslate nohighlight">\(-y\)</span>-rotation towards negative x values. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>tilt</strong></dt><dd><p>A <em>number</em> specifying the physical tilt of the element [rad]. All the physical quantities defined by the element are in the tilted frame, except <code class="xref mad mad-var docutils literal notranslate"><span class="pre">misalign</span></code> that comes first when tracking through an element, see the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> command for details. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>model</strong></dt><dd><p>A <em>string</em> specifying the integration model <code class="docutils literal notranslate"><span class="pre">&quot;DKD&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;TKT&quot;</span></code> to use when tracking through the element and overriding the command attribute, see the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> command for details. (default: <code class="docutils literal notranslate"><span class="pre">cmd.model</span></code>).</p>
</dd>
<dt><strong>method</strong></dt><dd><p>A <em>number</em> specifying the integration order 2, 4, 6, or 8 to use when tracking through the element and overriding the command attribute, see the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> command for details. (default: <code class="docutils literal notranslate"><span class="pre">cmd.method</span></code>).</p>
</dd>
<dt><strong>nslice</strong></dt><dd><p>A <em>number</em> specifying the number of slices or a <em>list</em> of increasing relative positions or a <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(elm,</span> <span class="pre">mflw,</span> <span class="pre">lw)</span></code> returning one of the two previous kind of positions specification to use when tracking through the element and overriding the command attribute, see the <a class="reference internal" href="mad_cmd_survey.html"><span class="doc">survey</span></a> or the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> commands for details. (default: <code class="docutils literal notranslate"><span class="pre">cmd.nslice</span></code>).</p>
</dd>
<dt><strong>refpos</strong></dt><dd><p>A <em>string</em> holding one of <code class="docutils literal notranslate"><span class="pre">&quot;entry&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;centre&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;exit&quot;</span></code>, or a <em>number</em> specifying a position in [m] from the start of the element, all of them resulting in an offset to substract to the <code class="docutils literal notranslate"><span class="pre">at</span></code> attribute to find the <span class="math notranslate nohighlight">\(s\)</span>-position of the element entry when inserted in a sequence, see <a class="reference internal" href="mad_gen_sequence.html#elpos"><span class="std std-ref">element positions</span></a> for details. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code> <span class="math notranslate nohighlight">\(\equiv\)</span> <code class="docutils literal notranslate"><span class="pre">seq.refer</span></code>).</p>
</dd>
<dt><strong>aperture</strong></dt><dd><p>A <em>mappable</em> specifying aperture attributes, see <a class="reference internal" href="#sec-elm-aper"><span class="std std-ref">Aperture</span></a> for details.
(default: <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">{kind='circle',</span> <span class="pre">1}</span></code>).</p>
</dd>
<dt><strong>apertype</strong></dt><dd><p>A <em>string</em> specifying the aperture type, see <a class="reference internal" href="#sec-elm-aper"><span class="std std-ref">Aperture</span></a> for details.
(default: <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">\s</span> <span class="pre">-&gt;</span> <span class="pre">s.aperture.kind</span> <span class="pre">or</span> <span class="pre">'circle'</span></code>). <a class="footnote-reference brackets" href="#f4" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p>
</dd>
<dt><strong>misalign</strong></dt><dd><p>A <em>mappable</em> specifying misalignment attributes, see <a class="reference internal" href="#sec-elm-misalign"><span class="std std-ref">Misalignment</span></a> for details.
(default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>)</p>
</dd>
</dl>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">thick_element</span></code> <em>object</em> adds the following multipolar and fringe fields attributes:</p>
<dl class="simple">
<dt><strong>knl, ksl</strong></dt><dd><p>A <em>list</em> specifying respectively the <strong>multipolar</strong> and skew integrated strengths of the element [m<span class="math notranslate nohighlight">\(^{-i+1}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">{}</span></code>).</p>
</dd>
<dt><strong>dknl, dksl</strong></dt><dd><p>A <em>list</em> specifying respectively the multipolar and skew integrated strengths errors of the element [m<span class="math notranslate nohighlight">\(^{-i+1}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">{}</span></code>).</p>
</dd>
<dt><strong>e1, e2</strong></dt><dd><p>A <em>number</em> specifying respectively the horizontal angle of the pole faces at entry and exit of the element [rad]. A positive angle goes toward inside the element, see <a class="reference internal" href="#figsbend"><span class="std std-numref">Fig. 3</span></a> and <a class="reference internal" href="#figrbend"><span class="std std-numref">Fig. 4</span></a>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>h1, h2</strong></dt><dd><p>A <em>number</em> specifying respectively the horizontal curvature of the pole faces at entry and exit of the element [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. A positive curvature goes toward inside the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>hgap</strong></dt><dd><p>A <em>number</em> specifying half of the vertical gap at the center of the pole faces of the element [m]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>fint</strong></dt><dd><p>A <em>number</em> specifying the fringe field integral at entrance of the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>fintx</strong></dt><dd><p>A <em>number</em> specifying the fringe field integral at exit of the element. (default: <code class="docutils literal notranslate"><span class="pre">fint</span></code>).</p>
</dd>
<dt><strong>fringe</strong></dt><dd><p>A <em>number</em> specifying the bitmask to activate fringe fields of the element, see <a class="reference internal" href="#sec-elm-flgs"><span class="std std-ref">Flags</span></a> for details. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>fringemax</strong></dt><dd><p>A <em>number</em> specifying the maximum order for multipolar fringe fields of the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">2</span></code>).</p>
</dd>
<dt><strong>kill_ent_fringe</strong></dt><dd><p>A <em>logical</em> specifying to kill the entry fringe fields of the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt><strong>kill_exi_fringe</strong></dt><dd><p>A <em>logical</em> specifying to kill the entry fringe fields of the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt><strong>f1, f2</strong></dt><dd><p>A <em>number</em> specifying quadrupolar fringe field first and second parameter of SAD. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> object provides the following methods:</p>
<dl class="simple">
<dt><strong>select</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([flg])</span></code> to select the element for the flags <code class="docutils literal notranslate"><span class="pre">flg</span></code> (default: <code class="docutils literal notranslate"><span class="pre">selected</span></code>).</p>
</dd>
<dt><strong>deselect</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([flg])</span></code> to deselect the element for the flags <code class="docutils literal notranslate"><span class="pre">flg</span></code> (default: <code class="docutils literal notranslate"><span class="pre">selected</span></code>).</p>
</dd>
<dt><strong>is_selected</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">([flg])</span></code> to test the element for the flags <code class="docutils literal notranslate"><span class="pre">flg</span></code> (default: <code class="docutils literal notranslate"><span class="pre">selected</span></code>).</p>
</dd>
<dt><strong>is_disabled</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> to test if the element is <em>disabled</em>, which is equivalent to call the method <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_selected(disabled)</span></code>.</p>
</dd>
<dt><strong>is_observed</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> to test if the element is <em>observed</em>, which is equivalent to call the method <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_selected(observed)</span></code>.</p>
</dd>
<dt><strong>is_implicit</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">()</span></code> to test if the element is <em>implicit</em>, which is equivalent to call the method <code class="xref mad mad-func docutils literal notranslate"><span class="pre">is_selected(implicit)</span></code>.</p>
</dd>
</dl>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">drift_element</span></code> and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">thick_element</span></code> objects provide the following extra methods, see <a class="reference internal" href="#sec-elm-subelm"><span class="std std-ref">sub-elements</span></a> for details about the <code class="docutils literal notranslate"><span class="pre">sat</span></code> attribute:</p>
<dl class="simple">
<dt><strong>index_sat</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(sat,</span> <span class="pre">[cmp])</span></code> returning the lowest index <code class="xref mad mad-var docutils literal notranslate"><span class="pre">idx</span></code> (starting from 1) of the first sub-element with a relative position from the element entry that compares <code class="xref mad mad-const docutils literal notranslate"><span class="pre">true</span></code> with the <em>number</em> <code class="docutils literal notranslate"><span class="pre">sat</span></code> using the optional <em>callable</em> <code class="docutils literal notranslate"><span class="pre">cmp(sat,</span> <span class="pre">self[idx].sat)</span></code> (default: <code class="docutils literal notranslate"><span class="pre">&quot;==&quot;</span></code>), or <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">#self+1</span></code>. In the presence of multiple equal positions, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;=&quot;</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">&quot;&gt;=&quot;</span></code>) will return the lowest index of the position while <code class="docutils literal notranslate"><span class="pre">&quot;&lt;&quot;</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">&quot;&gt;&quot;</span></code>) the lowest index next to the position for ascending (resp. descending) order.</p>
</dd>
<dt><strong>insert_sat</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(elm,</span> <span class="pre">[cmp])</span></code> returning the element after inserting the sub-element <code class="xref mad mad-var docutils literal notranslate"><span class="pre">elm</span></code> at the index determined by <code class="docutils literal notranslate"><span class="pre">:index_sat(elm.sat,</span> <span class="pre">[cmp])</span></code> using the optional <em>callable</em> <code class="docutils literal notranslate"><span class="pre">cmp</span></code> (default: <code class="docutils literal notranslate"><span class="pre">&quot;&lt;&quot;</span></code>).</p>
</dd>
<dt><strong>replace_sat</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(elm)</span></code> returning the replaced sub-element found at the index determined by <code class="docutils literal notranslate"><span class="pre">:index_sat(elm.sat)</span></code> by the new sub-element <code class="docutils literal notranslate"><span class="pre">elm</span></code>, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p>
</dd>
<dt><strong>remove_sat</strong></dt><dd><p>A <em>method</em>     <code class="docutils literal notranslate"><span class="pre">(sat)</span></code> returning the removed sub-element found at the index determined by <code class="docutils literal notranslate"><span class="pre">:index_sat(sat)</span></code>, or <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>.</p>
</dd>
</dl>
</section>
<section id="metamethods">
<h2>Metamethods<a class="headerlink" href="#metamethods" title="Permalink to this heading">¶</a></h2>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> object provides the following metamethods:</p>
<dl class="simple">
<dt><strong>__len</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">()</span></code> overloading the length operator <code class="docutils literal notranslate"><span class="pre">#</span></code> to return the number of subelements in the <em>list</em> part of the element.</p>
</dd>
<dt><strong>__add</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">(obj)</span></code> overloading the binary operator <code class="docutils literal notranslate"><span class="pre">+</span></code> to build a <code class="xref mad mad-var docutils literal notranslate"><span class="pre">bline</span></code> object from the juxtaposition of two elements.</p>
</dd>
<dt><strong>__mul</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">(n)</span></code> overloading the binary operator <code class="docutils literal notranslate"><span class="pre">*</span></code> to build a <code class="xref mad mad-var docutils literal notranslate"><span class="pre">bline</span></code> object from the repetition of an element <code class="xref mad mad-var docutils literal notranslate"><span class="pre">n</span></code> times, i.e. one of the two operands must be a <em>number</em>.</p>
</dd>
<dt><strong>__unm</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">(n)</span></code> overloading the unary operator <code class="docutils literal notranslate"><span class="pre">-</span></code> to build a <code class="xref mad mad-var docutils literal notranslate"><span class="pre">bline</span></code> object from the turning of an element, i.e. reflect the element.</p>
</dd>
<dt><strong>__tostring</strong></dt><dd><p>A <em>metamethod</em> <code class="docutils literal notranslate"><span class="pre">()</span></code> returning a <em>string</em> built from the element information, e.g. <code class="docutils literal notranslate"><span class="pre">print(monitor</span> <span class="pre">'bpm'</span> <span class="pre">{})</span></code> display the <em>string</em> <code class="docutils literal notranslate"><span class="pre">&quot;:monitor:</span> <span class="pre">'bpm'</span> <span class="pre">memory-address&quot;</span></code>.</p>
</dd>
</dl>
<p>The operators overloading of elements allows to unify sequence and beamline definitions in a consistent and simple way, noting that <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sequence</span></code> and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">bline</span></code> are (external) elements too.</p>
<p>The following attribute is stored with metamethods in the metatable, but has different purpose:</p>
<dl class="simple">
<dt><strong>__elem</strong></dt><dd><p>A unique private <em>reference</em> that characterizes elements.</p>
</dd>
</dl>
</section>
<section id="id5">
<h2>Elements<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>Some elements define new attributes or override the default values provided by the <em>root object</em> <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code>. The following subsections describe the elements supported by MAD-NG.</p>
<section id="sbend">
<h3>SBend<a class="headerlink" href="#sbend" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sbend</span></code> element is a sector bending magnet with a curved reference system as shown in <a class="reference internal" href="#figsbend"><span class="std std-numref">Fig. 3</span></a>, and defines or overrides the following attributes:</p>
<dl class="simple">
<dt><strong>k0</strong></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">number</span></code> specifying the dipolar strength of the element [<span class="math notranslate nohighlight">\(\mathrm{m}^{-1}\)</span>].
(default: <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">k0</span> <span class="pre">=</span> <span class="pre">\s</span> <span class="pre">-&gt;</span> <span class="pre">s.angle/s.l</span></code>). <a class="footnote-reference brackets" href="#f5" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> <a class="footnote-reference brackets" href="#f6" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p>
</dd>
<dt><strong>k0s</strong></dt><dd><p>A <em>number</em> specifying the dipolar skew strength of the element [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>k1, k1s</strong></dt><dd><p>A <em>number</em> specifying respectively the quadrupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-2}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>k2, k2s</strong></dt><dd><p>A <em>number</em> specifying respectively the sextupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-3}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>fringe</strong></dt><dd><p>Set to flag <code class="docutils literal notranslate"><span class="pre">fringe.bend</span></code> to activate the fringe fields by default, see <a class="reference internal" href="#sec-elm-flgs"><span class="std std-ref">Flags</span></a> for details.</p>
</dd>
</dl>
<figure class="align-center" id="figsbend">
<img alt="_images/elm_refsys_sbend.jpg" src="_images/elm_refsys_sbend.jpg" />
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">Reference system for a sector bending magnet.</span><a class="headerlink" href="#figsbend" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="rbend">
<h3>RBend<a class="headerlink" href="#rbend" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">rbend</span></code> element is a rectangular bending magnet with a straight reference system as shown in <a class="reference internal" href="#figrbend"><span class="std std-numref">Fig. 4</span></a>, and defines or overrides the following attributes:</p>
<dl class="simple">
<dt><strong>k0</strong></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">number</span></code> specifying the dipolar strength of the element [<span class="math notranslate nohighlight">\(\mathrm{m}^{-1}\)</span>].
(default: <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">k0</span> <span class="pre">=</span> <span class="pre">\s</span> <span class="pre">-&gt;</span> <span class="pre">s.angle/s.l</span></code>). <a class="footnote-reference brackets" href="#f5" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> <a class="footnote-reference brackets" href="#f6" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p>
</dd>
<dt><strong>k0s</strong></dt><dd><p>A <em>number</em> specifying the dipolar skew strength of the element [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>k1, k1s</strong></dt><dd><p>A <em>number</em> specifying respectively the quadrupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-2}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>k2, k2s</strong></dt><dd><p>A <em>number</em> specifying respectively the sextupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-3}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>fringe</strong></dt><dd><p>Set to flag <code class="docutils literal notranslate"><span class="pre">fringe.bend</span></code> to activate the fringe fields by default, see <a class="reference internal" href="#sec-elm-flgs"><span class="std std-ref">Flags</span></a> for details.</p>
</dd>
<dt><strong>true_rbend</strong></dt><dd><p>A <em>logical</em> specifying if this <code class="xref mad mad-var docutils literal notranslate"><span class="pre">rbend</span></code> element behaves like (<code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code>) a <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sbend</span></code> element with parallel pole faces, i.e. <span class="math notranslate nohighlight">\(e_1=e_2=\alpha/2\)</span> in <a class="reference internal" href="#figsbend"><span class="std std-numref">Fig. 3</span></a> , or like (<code class="xref mad mad-const docutils literal notranslate"><span class="pre">true</span></code>) a rectangular bending magnet with a straight reference system as shown in <a class="reference internal" href="#figrbend"><span class="std std-numref">Fig. 4</span></a>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">false</span></code>). <a class="footnote-reference brackets" href="#f6" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p>
</dd>
</dl>
<figure class="align-center" id="figrbend">
<img alt="_images/elm_refsys_rbend.jpg" src="_images/elm_refsys_rbend.jpg" />
<figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">Reference system for a rectangular bending magnet.</span><a class="headerlink" href="#figrbend" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="quadrupole">
<h3>Quadrupole<a class="headerlink" href="#quadrupole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">quadrupole</span></code> element is a straight focusing element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>k0, k0s</strong></dt><dd><p>A <em>number</em> specifying respectively the dipolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>k1, k1s</strong></dt><dd><p>A <em>number</em> specifying respectively the quadrupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-2}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>k2, k2s</strong></dt><dd><p>A <em>number</em> specifying respectively the sextupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-3}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="sextupole">
<h3>Sextupole<a class="headerlink" href="#sextupole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sextupole</span></code> element is a straight element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>k2, k2s</strong></dt><dd><p>A <em>number</em> specifying respectively the sextupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-3}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="octupole">
<h3>Octupole<a class="headerlink" href="#octupole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">octupole</span></code> element is a straight element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>k3, k3s</strong></dt><dd><p>A <em>number</em> specifying respectively the octupolar and skew strengths of the element [m<span class="math notranslate nohighlight">\(^{-4}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="decapole">
<h3>Decapole<a class="headerlink" href="#decapole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">decapole</span></code> element is a straight element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>k4, k4s</strong></dt><dd><p>A <em>number</em> specifying respectively the decapolar and skew strength of the element [m<span class="math notranslate nohighlight">\(^{-5}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="dodecapole">
<h3>Dodecapole<a class="headerlink" href="#dodecapole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">dodecapole</span></code> element is a straight element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>k5, k5s</strong></dt><dd><p>A <em>number</em> specifying respectively the dodecapolar and skew strength of the element [m<span class="math notranslate nohighlight">\(^{-6}\)</span>]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="solenoid">
<h3>Solenoid<a class="headerlink" href="#solenoid" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">solenoid</span></code> element defines the following attributes:</p>
<dl class="simple">
<dt><strong>ks, ksi</strong></dt><dd><p>A <em>number</em> specifying respectively the strength [rad/m] and the integrated strength [rad] of the element. A positive value points toward positive <span class="math notranslate nohighlight">\(s\)</span>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="multipole">
<h3>Multipole<a class="headerlink" href="#multipole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">multipole</span></code> element is a thin element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>knl, ksl</strong></dt><dd><p>A <em>list</em> specifying respectively the multipolar and skew integrated strengths of the element [m<span class="math notranslate nohighlight">\(^{-i+1}\)</span>]. (default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>).</p>
</dd>
<dt><strong>dknl, dksl</strong></dt><dd><p>A <em>list</em> specifying respectively the multipolar and skew integrated strengths errors of the element [m<span class="math notranslate nohighlight">\(^{-i+1}\)</span>]. (default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>).</p>
</dd>
</dl>
</section>
<section id="tkicker">
<h3>TKicker<a class="headerlink" href="#tkicker" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">tkicker</span></code> element is the <em>root object</em> of kickers and defines or overrides the following attributes:</p>
<dl class="simple">
<dt><strong>hkick</strong></dt><dd><p>A <em>number</em> specifying the horizontal strength of the element [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. By convention, a kicker with a positive horizontal strength kicks in the direction of the reference orbit, e.g. <code class="xref mad mad-var docutils literal notranslate"><span class="pre">hkick</span></code> <span class="math notranslate nohighlight">\(\equiv\)</span> <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">-</span> <span class="pre">knl[1]</span></code>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>vkick</strong></dt><dd><p>A <em>number</em> specifying the vertical strength of the element [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. By convention, a kicker with a positive vertical strength kicks toward the reference orbit, e.g. <code class="xref mad mad-var docutils literal notranslate"><span class="pre">vkick</span></code> <span class="math notranslate nohighlight">\(\equiv\)</span> <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">ksl[1]</span></code>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>method</strong></dt><dd><p>Set to <code class="xref mad mad-const docutils literal notranslate"><span class="pre">2</span></code> if <code class="docutils literal notranslate"><span class="pre">ptcmodel</span></code> is not set to enforce pure momentum kick and avoid dipolar strength integration that would introduce dispersion.</p>
</dd>
</dl>
</section>
<section id="kicker-hkicker-vkicker">
<h3>Kicker, HKicker, VKicker<a class="headerlink" href="#kicker-hkicker-vkicker" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">kicker</span></code> element inheriting from the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">tkicker</span></code> element, is the <em>root object</em> of kickers involved in the orbit correction and defines the following attributes:</p>
<dl class="simple">
<dt><strong>chkick, cvkick</strong></dt><dd><p>A <em>number</em> specifying respectively the horizontal and vertical correction strength of the element set by the <a class="reference internal" href="mad_cmd_correct.html"><span class="doc">correct</span></a> command [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. (default: ).</p>
</dd>
</dl>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">hkicker</span></code> (horizontal kicker) and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">vkicker</span></code> (vertical kicker) elements define the following attribute:</p>
<dl class="simple">
<dt><strong>kick</strong></dt><dd><p>A <em>number</em> specifying the strength of the element in its main direction [m<span class="math notranslate nohighlight">\(^{-1}\)</span>]. (default: ).</p>
</dd>
</dl>
</section>
<section id="monitor-hmonitor-vmonitor">
<h3>Monitor, HMonitor, VMonitor<a class="headerlink" href="#monitor-hmonitor-vmonitor" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">monitor</span></code> element is the root object of monitors involved in the orbit correction and defines the following attributes:</p>
<dl class="simple">
<dt><strong>mredx, mredy</strong></dt><dd><p>A <em>number</em> specifying respectively the readout <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-offset error of the element [m]. The offset is added to the beam position during orbit correction (after scaling). (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>mresx, mresy</strong></dt><dd><p>A <em>number</em> specifying respectively the readout <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-scaling error of the element. The scale factor multiplies the beam position by <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">1+mres</span></code> (before offset) during orbit correction. <a class="footnote-reference brackets" href="#f7" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a> (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">hmonitor</span></code> (horizontal monitor) and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">vmonitor</span></code> (vertical monitor) elements are specialisations inheriting from the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">monitor</span></code> element.</p>
</section>
<section id="rfcavity">
<h3>RFCavity<a class="headerlink" href="#rfcavity" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">rfcavity</span></code> element defines the following attributes:</p>
<dl class="simple">
<dt><strong>volt</strong></dt><dd><p>A <em>number</em> specifying the peak RF voltage of the element [MV]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>freq</strong></dt><dd><p>A <em>number</em> specifying a non-zero RF frequency of the element [MHz]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>lag</strong></dt><dd><p>A <em>number</em> specifying the RF phase lag of the element in unit of <span class="math notranslate nohighlight">\(2\pi\)</span>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>harmon</strong></dt><dd><p>A <em>number</em> specifying the harmonic number of the element if <code class="xref mad mad-var docutils literal notranslate"><span class="pre">freq</span></code> is zero. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>n_bessel</strong></dt><dd><p>A <em>number</em> specifying the transverse focussing effects order of the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>totalpath</strong></dt><dd><p>A <em>logical</em> specifying if the totalpath must be used in the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">true</span></code>).</p>
</dd>
</dl>
</section>
<section id="rfmultipole">
<h3>RFMultipole<a class="headerlink" href="#rfmultipole" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">rfmultipole</span></code> element defines the following attributes:</p>
<dl class="simple">
<dt><strong>pnl, psl</strong></dt><dd><p>A <em>list</em> specifying respectively the multipolar and skew phases of the element [rad]. (default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>).</p>
</dd>
<dt><strong>dpnl, dpsl</strong></dt><dd><p>A <em>list</em> specifying respectively the multipolar and skew phases errors of the element [rad]. (default: <code class="docutils literal notranslate"><span class="pre">{}</span></code>).</p>
</dd>
</dl>
</section>
<section id="elseparator">
<h3>ElSeparator<a class="headerlink" href="#elseparator" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">elseparator</span></code> element defines the following attributes:</p>
<dl class="simple">
<dt><strong>ex, ey</strong></dt><dd><p>A <em>number</em> specifying respectively the electric field <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-strength of the element [MV/m]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>exl, eyl</strong></dt><dd><p>A <em>number</em> specifying respectively the integrated electric field <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-strength of the element [MV]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="wiggler">
<h3>Wiggler<a class="headerlink" href="#wiggler" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">wiggler</span></code> element defines the following attributes: NYI, TBD</p>
</section>
<section id="beambeam">
<h3>BeamBeam<a class="headerlink" href="#beambeam" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">beambeam</span></code> element defines the following attributes: NYI, TBD</p>
</section>
<section id="genmap">
<h3>GenMap<a class="headerlink" href="#genmap" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">genmap</span></code> element defines the following attributes: <a class="footnote-reference brackets" href="#f8" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p>
<dl class="simple">
<dt><strong>damap</strong></dt><dd><p>A <code class="xref mad mad-var docutils literal notranslate"><span class="pre">damap</span></code> used for thick integration.</p>
</dd>
<dt><strong>update</strong></dt><dd><p>A <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(elm,</span> <span class="pre">mflw,</span> <span class="pre">lw)</span></code> invoked before each step of thick integration to update the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">damap</span></code>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>)</p>
</dd>
<dt><strong>nslice</strong></dt><dd><p>A <em>number</em> specifying the number of slices or a <em>list</em> of increasing relative positions or a <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(elm,</span> <span class="pre">mflw,</span> <span class="pre">lw)</span></code> returning one of the two previous kind of positions specification to use when tracking through the element and overriding the command attribute, see the <a class="reference internal" href="mad_cmd_survey.html"><span class="doc">survey</span></a> or the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> commands for details. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>).</p>
</dd>
</dl>
</section>
<section id="slink">
<h3>SLink<a class="headerlink" href="#slink" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">slink</span></code> element defines the following attributes: <a class="footnote-reference brackets" href="#f9" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a></p>
<dl class="simple">
<dt><strong>sequence</strong></dt><dd><p>A <em>sequence</em> to switch to right after exiting the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>)</p>
</dd>
<dt><strong>range</strong></dt><dd><p>A <em>range</em> specifying the span over the sequence to switch to, as expected by the sequence method <code class="xref mad mad-func docutils literal notranslate"><span class="pre">:siter</span></code>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>nturn</strong></dt><dd><p>A <em>number</em> specifying the number of turn to track the sequence to switch to, as expected by the sequence method <code class="xref mad mad-func docutils literal notranslate"><span class="pre">:siter</span></code>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>dir</strong></dt><dd><p>A <em>number</em> specifying the <span class="math notranslate nohighlight">\(s\)</span>-direction of the tracking of the sequence to switch to, as expected by the sequence method <code class="xref mad mad-func docutils literal notranslate"><span class="pre">:siter</span></code>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
<dt><strong>update</strong></dt><dd><p>A <em>callable</em> <code class="docutils literal notranslate"><span class="pre">(elm,</span> <span class="pre">mflw)</span></code> invoked before retrieving the other attributes when entering the element. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>)</p>
</dd>
</dl>
</section>
<section id="translate">
<h3>Translate<a class="headerlink" href="#translate" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">translate</span></code> element is a patch element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>dx, dy, ds</strong></dt><dd><p>A <em>number</em> specifying respectively <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, <span class="math notranslate nohighlight">\(s\)</span>-translation of the reference frame [m]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>)</p>
</dd>
</dl>
</section>
<section id="xrotation-yrotation-srotation">
<h3>XRotation, YRotation, SRotation<a class="headerlink" href="#xrotation-yrotation-srotation" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">xrotation</span></code> (rotation around <span class="math notranslate nohighlight">\(x\)</span>-axis), <code class="xref mad mad-var docutils literal notranslate"><span class="pre">yrotation</span></code> (rotation around <span class="math notranslate nohighlight">\(y\)</span>-axis) and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">srotation</span></code> (rotation around <span class="math notranslate nohighlight">\(s\)</span>-axis) elements are patches element and define the following attribute:</p>
<dl class="simple">
<dt><strong>angle</strong></dt><dd><p>A <em>number</em> specifying the rotation angle around the axis of the element [rad]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
</section>
<section id="changeref">
<h3>ChangeRef<a class="headerlink" href="#changeref" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">changeref</span></code> element is a patch element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>dx, dy, ds</strong></dt><dd><p>A <em>number</em> specifying respectively <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, <span class="math notranslate nohighlight">\(s\)</span>-translation of the reference frame [m]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>)</p>
</dd>
<dt><strong>dtheta, dphi, dpsi</strong></dt><dd><p>A <em>number</em> specifying respectively <span class="math notranslate nohighlight">\(y\)</span>, <span class="math notranslate nohighlight">\(-x\)</span>, <span class="math notranslate nohighlight">\(s\)</span>-rotation of the reference frame applied in this order after any translation [rad]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>)</p>
</dd>
</dl>
</section>
<section id="changedir">
<h3>ChangeDir<a class="headerlink" href="#changedir" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">changedir</span></code> element is a patch element that reverses the direction of the sequence during the tracking.</p>
</section>
<section id="changenrj">
<h3>ChangeNrj<a class="headerlink" href="#changenrj" title="Permalink to this heading">¶</a></h3>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">changenrj</span></code> element is a patch element and defines the following attributes:</p>
<dl class="simple">
<dt><strong>dnrj</strong></dt><dd><p>A <em>number</em> specifying the change by <span class="math notranslate nohighlight">\(\delta_E\)</span> of the <em>reference</em> beam energy [GeV]. The momenta of the particles or damaps belonging to the reference beam (i.e. not owning a beam) are updated, while other particles or damaps owning their beam are ignored. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>)</p>
</dd>
</dl>
</section>
</section>
<section id="flags">
<span id="sec-elm-flgs"></span><h2>Flags<a class="headerlink" href="#flags" title="Permalink to this heading">¶</a></h2>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> module exposes the following <em>object</em> flags through <code class="docutils literal notranslate"><span class="pre">MAD.element.flags</span></code> to use in conjunction with the methods <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">deselect</span></code>: <a class="footnote-reference brackets" href="#f10" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a></p>
<dl class="simple">
<dt><strong>none</strong></dt><dd><p>All bits zero.</p>
</dd>
<dt><strong>selected</strong></dt><dd><p>Set if the element has been selected.</p>
</dd>
<dt><strong>disabled</strong></dt><dd><p>Set if the element has been disabled, e.g. for orbit correction.</p>
</dd>
<dt><strong>observed</strong></dt><dd><p>Set if the element has been selected for observation, e.g. for output to TFS table.
The <code class="docutils literal notranslate"><span class="pre">$end</span></code> markers are selected for observation by default, and commands with the <code class="docutils literal notranslate"><span class="pre">observe</span></code> attribute set to <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code> discard this flag and consider all elements as selected for observation.</p>
</dd>
<dt><strong>implicit</strong></dt><dd><p>Set if the element is implicit, like the temporary <em>implicit</em> drifts created on-the-fly by the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sequence</span></code> <span class="math notranslate nohighlight">\(s\)</span>-iterator with indexes at half integers. This flag is used by commands with the <code class="docutils literal notranslate"><span class="pre">implicit</span></code> attribute.</p>
</dd>
<dt><strong>playout</strong></dt><dd><p>Set if the element <code class="xref mad mad-var docutils literal notranslate"><span class="pre">angle</span></code> must be used by layout plot. This flag is useful to plot multiple sequence layouts around interaction points, like <code class="docutils literal notranslate"><span class="pre">lhcb1</span></code> and <code class="docutils literal notranslate"><span class="pre">lhcb2</span></code> around <code class="docutils literal notranslate"><span class="pre">IP1</span></code> and <code class="docutils literal notranslate"><span class="pre">IP5</span></code>.</p>
</dd>
</dl>
</section>
<section id="fringe-fields">
<span id="sec-elm-frng"></span><h2>Fringe fields<a class="headerlink" href="#fringe-fields" title="Permalink to this heading">¶</a></h2>
<p>The <code class="xref mad mad-var docutils literal notranslate"><span class="pre">element</span></code> module exposes the following flags through <code class="docutils literal notranslate"><span class="pre">MAD.element.flags.fringe</span></code> to <em>control</em> the elements fringe fields through their attribute <code class="docutils literal notranslate"><span class="pre">fringe</span></code>, or to <em>restrict</em> the activated fringe fields with the commands attribute <code class="docutils literal notranslate"><span class="pre">fringe</span></code>: <a class="footnote-reference brackets" href="#f11" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a></p>
<dl class="simple">
<dt><strong>none</strong></dt><dd><p>All bits zero.</p>
</dd>
<dt><strong>bend</strong></dt><dd><p>Control the element fringe fields for bending fields.</p>
</dd>
<dt><strong>mult</strong></dt><dd><p>Control the element fringe fields for multipolar fields up to <code class="docutils literal notranslate"><span class="pre">fringemax</span></code> order.</p>
</dd>
<dt><strong>rfcav</strong></dt><dd><p>Control the element fringe fields for rfcavity fields.</p>
</dd>
<dt><strong>qsad</strong></dt><dd><p>Control the element fringe fields for multipolar fields with extra terms for quadrupolar fields for compatibility with SAD.</p>
</dd>
<dt><strong>comb</strong></dt><dd><p>Control the element fringe fields for combined bending and multipolar fields.</p>
</dd>
<dt><strong>combqs</strong></dt><dd><p>Control the element fringe fields for combined bending and multipolar fields with extra terms for quadrupolar fields for compatibility with SAD.</p>
</dd>
</dl>
<p>The <em>element</em> <code class="xref mad mad-var docutils literal notranslate"><span class="pre">thick_element</span></code> provides a dozen of attributes to parametrize the aforementionned fringe fields. Note that in some future, part of these attributes may be grouped into a <em>mappable</em> to ensure a better consistency of their parametrization.</p>
</section>
<section id="sub-elements">
<span id="sec-elm-subelm"></span><h2>Sub-elements<a class="headerlink" href="#sub-elements" title="Permalink to this heading">¶</a></h2>
<p>An element can have thin or thick sub-elements stored in its <em>list</em> part, hence the length operator <code class="docutils literal notranslate"><span class="pre">#</span></code> returns the number of them. The attribute <code class="docutils literal notranslate"><span class="pre">sat</span></code> of sub-elements, i.e. read <code class="docutils literal notranslate"><span class="pre">s</span></code>ub-<code class="docutils literal notranslate"><span class="pre">at</span></code>, is interpreted as their relative position from the entry of their enclosing main element, that is a fractional of its length. The positions of the sub-elements can be made absolute by dividing their <code class="docutils literal notranslate"><span class="pre">sat</span></code> attribute by the length of their main element using lambda expressions. The sub-elements are only considered and valid in the <code class="docutils literal notranslate"><span class="pre">drift_element</span></code> and <code class="docutils literal notranslate"><span class="pre">thick_element</span></code> kinds that implement the methods <code class="docutils literal notranslate"><span class="pre">:index_sat</span></code>, <code class="docutils literal notranslate"><span class="pre">:insert_sat</span></code>, <code class="docutils literal notranslate"><span class="pre">:remove_sat</span></code>, and <code class="docutils literal notranslate"><span class="pre">:replace_sat</span></code> to manage sub-elements from their <code class="docutils literal notranslate"><span class="pre">sat</span></code> attribute. The sequence method <code class="docutils literal notranslate"><span class="pre">:install</span></code> updates the <code class="docutils literal notranslate"><span class="pre">sat</span></code> attribute of the elements installed as sub-elements if the <em>logical</em> <code class="docutils literal notranslate"><span class="pre">elements.subelem</span></code> of the packed form is enabled, i.e. when the <span class="math notranslate nohighlight">\(s\)</span>-position determined by the <code class="docutils literal notranslate"><span class="pre">at</span></code>, <code class="docutils literal notranslate"><span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">refpos</span></code> attributes falls inside a non-zero length element already installed in the sequence that is not an <em>implicit</em> drift. The physics of thick sub-elements will shield the physics of their enclosing main element along their length, unless they combine their attributes with those of their main element using lambda expressions to select some combined function physics.</p>
</section>
<section id="aperture">
<span id="sec-elm-aper"></span><h2>Aperture<a class="headerlink" href="#aperture" title="Permalink to this heading">¶</a></h2>
<p>All the apertures are <em>mappable</em> defined by the following attributes in the tilted frame of an element, see the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> command for details:</p>
<dl class="simple">
<dt><strong>kind</strong></dt><dd><p>A <em>string</em> specifying the aperture shape. (no default).</p>
</dd>
<dt><strong>tilt</strong></dt><dd><p>A <em>number</em> specifying the tilt angle of the aperture [rad]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>xoff, yoff</strong></dt><dd><p>A <em>number</em> specifying the transverse <span class="math notranslate nohighlight">\(x,y\)</span>-offset of the aperture [m]. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>maper</strong></dt><dd><p>A <em>mappable</em> specifying a smaller aperture <a class="footnote-reference brackets" href="#f12" id="id16" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a> than the <code class="docutils literal notranslate"><span class="pre">polygon</span></code> aperture to use before checking the polygon itself to speed up the test. The attributes <code class="docutils literal notranslate"><span class="pre">tilt</span></code>, <code class="docutils literal notranslate"><span class="pre">xoff</span></code> and <code class="docutils literal notranslate"><span class="pre">yoff</span></code> are ignored and superseded by the ones of the <code class="docutils literal notranslate"><span class="pre">polygon</span></code> aperture. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">nil</span></code>).</p>
</dd>
</dl>
<p>The supported aperture shapes are listed hereafter. The parameters defining the shapes are expected to be in the <em>list</em> part of the apertures and defines the top-right sector shape, except for the <code class="docutils literal notranslate"><span class="pre">polygon</span></code>:</p>
<dl class="simple">
<dt><strong>square</strong></dt><dd><p>A square shape with one parameter defining the side half-length. It is the default aperture check with limits set to <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>.</p>
</dd>
<dt><strong>rectangle</strong></dt><dd><p>A rectangular shape with two parameters defining the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-half lengths (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code> [m]).</p>
</dd>
<dt><strong>circle</strong></dt><dd><p>A circular shape with one parameter defining the radius.</p>
</dd>
<dt><strong>ellipse</strong></dt><dd><p>A elliptical shape with two parameters defining the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-radii. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code> [m]).</p>
</dd>
<dt><strong>rectcircle</strong></dt><dd><p>A rectangular shape intersected with a circular shape with three parameters defining the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-half lengths and the radius. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code> [m]).</p>
</dd>
<dt><strong>rectellipse</strong></dt><dd><p>A rectangular shape intersected with an elliptical shape with four parameters defining the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-half lengths and the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-radii.</p>
</dd>
<dt><strong>racetrack</strong></dt><dd><p>A rectangular shape with corners rounded by an elliptical shape with four parameters defining the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-half lengths and the corners <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-radii.</p>
</dd>
<dt><strong>octagon</strong></dt><dd><p>A rectangular shape with corners truncated by a triangular shape with four parameters defining the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-half lengths and the triangle <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>-side lengths. An octagon can model hexagon or diamond shapes by equating the triangle lengths to the rectangle half-lengths.</p>
</dd>
<dt><strong>polygon</strong></dt><dd><p>A polygonal shape defined by two vectors <code class="xref mad mad-var docutils literal notranslate"><span class="pre">vx</span></code> and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">vy</span></code> holding the vertices coordinates. The polygon does not need to be convex, simple or closed, but in the latter case it will be closed automatically by joining the first and the last vertices.</p>
</dd>
<dt><strong>bbox</strong></dt><dd><p>A 6D bounding box with six parameters defining the upper limits of the absolute values of the six coordinates.</p>
</dd>
</dl>
<p>The following example defines new classes with three different aperture definitions:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">quadrupole</span> <span class="kr">in</span> <span class="n">MAD</span><span class="p">.</span><span class="n">element</span>
<span class="kd">local</span> <span class="n">mq</span> <span class="o">=</span> <span class="n">quadrupole</span> <span class="s1">&#39;mq&#39;</span> <span class="p">{</span> <span class="n">l</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>                               <span class="c1">-- new class</span>
  <span class="n">aperture</span> <span class="o">=</span> <span class="p">{</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;racetrack&#39;</span><span class="p">,</span>
               <span class="n">tilt</span><span class="o">=</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">xoff</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="mf">5e-4</span><span class="p">,</span>                 <span class="c1">-- attributes</span>
               <span class="mf">0.06</span><span class="p">,</span><span class="mf">0.06</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.01</span> <span class="p">}</span>                            <span class="c1">-- parameters</span>
<span class="p">}</span>
<span class="kd">local</span> <span class="n">mqdiam</span> <span class="o">=</span> <span class="n">quadrupole</span> <span class="s1">&#39;mqdiam&#39;</span> <span class="p">{</span> <span class="n">l</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>                       <span class="c1">-- new class</span>
  <span class="n">aperture</span> <span class="o">=</span> <span class="p">{</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;octagon&#39;</span><span class="p">,</span> <span class="n">xoff</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span>            <span class="c1">-- attributes</span>
               <span class="mf">0.06</span><span class="p">,</span><span class="mf">0.04</span><span class="p">,</span><span class="mf">0.06</span><span class="p">,</span><span class="mf">0.04</span> <span class="p">}</span>                            <span class="c1">-- parameters</span>
<span class="p">}</span>
<span class="kd">local</span> <span class="n">mqpoly</span> <span class="o">=</span> <span class="n">quadrupole</span> <span class="s1">&#39;mqpoly&#39;</span> <span class="p">{</span> <span class="n">l</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>                       <span class="c1">-- new class</span>
  <span class="n">aperture</span> <span class="o">=</span> <span class="p">{</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;polygon&#39;</span><span class="p">,</span> <span class="n">tilt</span><span class="o">=</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">xoff</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="c1">-- attributes</span>
               <span class="n">vx</span><span class="o">=</span><span class="n">vector</span><span class="p">{</span><span class="mf">0.05</span><span class="p">,</span> <span class="p">...},</span> <span class="n">vy</span><span class="o">=</span><span class="n">vector</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="p">...},</span>         <span class="c1">-- parameters</span>
               <span class="n">aper</span><span class="o">=</span><span class="p">{</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">}</span>                       <span class="c1">-- 2nd aperture</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="misalignment">
<span id="sec-elm-misalign"></span><h2>Misalignment<a class="headerlink" href="#misalignment" title="Permalink to this heading">¶</a></h2>
<p>The misalignments are <em>mappable</em> defined at the entry of an element by the following attributes, see the <a class="reference internal" href="mad_cmd_track.html"><span class="doc">track</span></a> command for details:</p>
<dl class="simple">
<dt><strong>dx, dy, ds</strong></dt><dd><p>A <em>number</em> specifying the <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, <span class="math notranslate nohighlight">\(s\)</span>-displacement at the element entry [m], see <a class="reference internal" href="#fig-gen-dispxs"><span class="std std-numref">Fig. 5</span></a> and <a class="reference internal" href="#fig-gen-dispys"><span class="std std-numref">Fig. 6</span></a> . (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>dtheta</strong></dt><dd><p>A <em>number</em> specifying the <span class="math notranslate nohighlight">\(y\)</span>-rotation angle (azimuthal) at the element entry [rad], see <a class="reference internal" href="#fig-gen-dispxs"><span class="std std-numref">Fig. 5</span></a>. (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>dphi</strong></dt><dd><p>A <em>number</em> specifying the <span class="math notranslate nohighlight">\(-x\)</span>-rotation angle (elevation) at the entry of the element [rad], see <a class="reference internal" href="#fig-gen-dispxy"><span class="std std-numref">Fig. 7</span></a> . (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><strong>dpsi</strong></dt><dd><p>A <em>number</em> specifying the <span class="math notranslate nohighlight">\(s\)</span>-rotation angle (roll) at the element entry [rad], see <a class="reference internal" href="#fig-gen-dispxy"><span class="std std-numref">Fig. 7</span></a> . (default: <code class="xref mad mad-const docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
</dl>
<p>Two kinds of misalignments are available for an element and summed beforehand:</p>
<ul class="simple">
<li><p>The <em>absolute</em> misalignments of the element versus its local reference frame, and specified by its <code class="docutils literal notranslate"><span class="pre">misalign</span></code> attribute. These misalignments are always considered.</p></li>
<li><p>The <em>relative</em> misalignments of the element versus a given sequence, and specified by the <em>method</em> <code class="xref mad mad-meth docutils literal notranslate"><span class="pre">:misalign</span></code> of <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sequence</span></code>. These misalignments can be considered or not depending of command settings.</p></li>
</ul>
<figure class="align-center" id="fig-gen-dispxs">
<img alt="_images/elm_dsplmnt_xs.jpg" src="_images/elm_dsplmnt_xs.jpg" />
<figcaption>
<p><span class="caption-number">Fig. 5 </span><span class="caption-text">Displacements in the <span class="math notranslate nohighlight">\((x, s)\)</span> plane.</span><a class="headerlink" href="#fig-gen-dispxs" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="fig-gen-dispys">
<img alt="_images/elm_dsplmnt_ys.jpg" src="_images/elm_dsplmnt_ys.jpg" />
<figcaption>
<p><span class="caption-number">Fig. 6 </span><span class="caption-text">Displacements in the <span class="math notranslate nohighlight">\((y, s)\)</span> plane.</span><a class="headerlink" href="#fig-gen-dispys" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="fig-gen-dispxy">
<img alt="_images/elm_dsplmnt_xy.jpg" src="_images/elm_dsplmnt_xy.jpg" />
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">Displacements in the <span class="math notranslate nohighlight">\((x, y)\)</span> plane.</span><a class="headerlink" href="#fig-gen-dispxy" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>In MAD-X, zero-length <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sextupole</span></code> and <code class="xref mad mad-var docutils literal notranslate"><span class="pre">octupole</span></code> are valid but may have surprising effects…</p>
</aside>
<aside class="footnote brackets" id="f2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>E.g. zero-length <code class="xref mad mad-var docutils literal notranslate"><span class="pre">sextupole</span></code> must define their strength with <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">knl[3]</span></code> instead of <code class="xref mad mad-var docutils literal notranslate"><span class="pre">k2</span></code> to have the expected effect.</p>
</aside>
<aside class="footnote brackets" id="f3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>By default <code class="xref mad mad-var docutils literal notranslate"><span class="pre">minlen</span></code> = <span class="math notranslate nohighlight">\(10^{-12}\)</span> m.</p>
</aside>
<aside class="footnote brackets" id="f4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>This attribute was introduced to ease the translation of MAD-X sequences and may disappear in some future.</p>
</aside>
<aside class="footnote brackets" id="f5" role="note">
<span class="label"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id6">1</a>,<a role="doc-backlink" href="#id8">2</a>)</span>
<p>By default bending magnets are ideal bends, that is <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">angle</span> <span class="pre">=</span> <span class="pre">k0*l</span></code></p>
</aside>
<aside class="footnote brackets" id="f6" role="note">
<span class="label"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id7">1</a>,<a role="doc-backlink" href="#id9">2</a>,<a role="doc-backlink" href="#id10">3</a>)</span>
<p>For compatibility with MAD-X.</p>
</aside>
<aside class="footnote brackets" id="f7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">7</a><span class="fn-bracket">]</span></span>
<p>This definition comes from MAD-X default zeroed values such that undefined attribute gives a scale of <code class="xref mad mad-const docutils literal notranslate"><span class="pre">1</span></code>.</p>
</aside>
<aside class="footnote brackets" id="f8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id12">8</a><span class="fn-bracket">]</span></span>
<p>This element is a generalization of the <code class="xref mad mad-var docutils literal notranslate"><span class="pre">matrix</span></code> element of MAD-X, to use with care!</p>
</aside>
<aside class="footnote brackets" id="f9" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id13">9</a><span class="fn-bracket">]</span></span>
<p>This element allows to switch between sequences during tracking, kind of <code class="xref mad mad-expr docutils literal notranslate"><span class="pre">if-then-else</span></code> for tracking.</p>
</aside>
<aside class="footnote brackets" id="f10" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id14">10</a><span class="fn-bracket">]</span></span>
<p>Remember that flags are <em>not</em> inherited nor copied as they are qualifying the object itself.</p>
</aside>
<aside class="footnote brackets" id="f11" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id15">11</a><span class="fn-bracket">]</span></span>
<p>Those flags are <em>not</em> object flags, but fringe fields flags.</p>
</aside>
<aside class="footnote brackets" id="f12" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id16">12</a><span class="fn-bracket">]</span></span>
<p>It is the responsibility of the user to ensure that <code class="xref mad mad-var docutils literal notranslate"><span class="pre">maper</span></code> defines a smaller aperture than the polygon aperture.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mad_gen_beta0.html" class="btn btn-neutral float-left" title="Beta0 Blocks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mad_gen_sequence.html" class="btn btn-neutral float-right" title="Sequences" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Laurent Deniau.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>